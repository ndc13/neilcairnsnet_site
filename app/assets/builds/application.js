/*! For license information please see application.js.LICENSE.txt */
(()=>{var t={532:(t,e,n)=>{"use strict";var i=n(310),r=n(529),s="value",o="\n  ",a={};function l(t){var e=Array.isArray(t);return function(n){var i=c(a.plainArray,n);if(i)return i;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var r=0;r<n.length;r++)if(i=c(e?t[r]:t,n[r]))return[r].concat(i)}}function c(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function h(t,e){var n=t.length,i=t[n-1],o=t.slice(0,n-1);return 0===o.length&&(o=[s]),e=r(e,{path:o}),"function"==typeof i?i(e):u(e,function(t){return"must be "+((/^an? /.test(e=t)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e)+".");var e}(i))}function u(t,e){return(d(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function d(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}a.assert=function(t,e){return e=e||{},function(n){var i=c(t,n);if(i){var r=h(i,e);throw e.apiName&&(r=e.apiName+": "+r),new Error(r)}}},a.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map((function(t){return{key:t,value:e[t]}})));return function(t){var e,i=c(a.plainObject,t);if(i)return i;for(var r=[],l=0;l<n.length;l++)e=n[l].key,(i=c(n[l].value,t[e]))&&r.push([e].concat(i));return r.length<2?r[0]:function(t){r=r.map((function(e){return"- "+e[0]+": "+h(e,t).split("\n").join(o)}));var e=t.path.join(".");return"The following properties"+(e===s?"":" of "+e)+" have invalid values:"+o+r.join(o)}}},a.strictShape=function(t){var e=a.shape(t);return function(n){var i=e(n);if(i)return i;var r=Object.keys(n).reduce((function(e,n){return void 0===t[n]&&e.push(n),e}),[]);return 0!==r.length?function(){return"The following keys are invalid: "+r.join(", ")}:void 0}},a.arrayOf=function(t){return l(t)},a.tuple=function(){return l(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments))},a.required=function(t){function e(e){return null==e?function(t){return u(t,d(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},a.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n,i=t.map((function(t){return c(t,e)})).filter(Boolean);if(i.length===t.length)return i.every((function(t){return 1===t.length&&"string"==typeof t[0]}))?(n=i.map((function(t){return t[0]}))).length<2?n[0]:2===n.length?n.join(" or "):n.slice(0,-1).join(", ")+", or "+n.slice(-1):i.reduce((function(t,e){return e.length>t.length?e:t}))}},a.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},a.oneOf=function(){var t=(Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments)).map((function(t){return a.equal(t)}));return a.oneOfType.apply(this,t)},a.range=function(t){var e=t[0],n=t[1];return function(t){if(c(a.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},a.any=function(){},a.boolean=function(t){if("boolean"!=typeof t)return"boolean"},a.number=function(t){if("number"!=typeof t)return"number"},a.plainArray=function(t){if(!Array.isArray(t))return"array"},a.plainObject=function(t){if(!i(t))return"object"},a.string=function(t){if("string"!=typeof t)return"string"},a.func=function(t){if("function"!=typeof t)return"function"},a.validate=c,a.processMessage=h,t.exports=a},236:(t,e,n)=>{"use strict";var i=n(416).x0;function r(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}r.prototype={select:function(t,e){var n=this.getSelectedIndex(t,e),i=this.getEventPayload("search.select",e);if(i.resultIndex=n,i.resultPlaceName=t.place_name,i.resultId=t.id,(n!==this.lastSentIndex||i.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=i.queryString,i.queryString))return this.push(i)},start:function(t){var e=this.getEventPayload("search.start",t);if(e.queryString)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=t.key,n.queryString)return this.push(n)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(t);this.request(n,function(t){return t?this.handleError(t,e):e?e():void 0}.bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var n;n=e.options.proximity?"object"==typeof e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:"ip"===e.options.proximity?[999,999]:e.options.proximity:null;var i=e._map?e._map.getZoom():void 0,r={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:i,keyboardLocale:this.locale};return"search.select"===t?r.queryString=e.inputString:"search.select"!=t&&e._inputEl?r.queryString=e._inputEl.value:r.queryString=e.inputString,r},request:function(t,e){var n=new XMLHttpRequest;for(var i in n.onreadystatechange=function(){if(4==this.readyState)return 204==this.status?e(null):e(this.statusText)},n.open(t.method,t.host+"/"+t.path,!0),t.headers){var r=t.headers[i];n.setRequestHeader(i,r)}n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return i()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var n=e._typeahead.data,i=t.id;return n.map((function(t){return t.id})).indexOf(i)}},shouldEnableLogging:function(t){return!(!1===t.enableEventLogging||t.origin&&"https://api.mapbox.com"!==t.origin||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=r},630:t=>{t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},645:t=>{function e(){}e.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise((function(e,n){window.navigator.geolocation.getCurrentPosition(e,n,t)}))}},t.exports=e},651:(t,e,n)=>{"use strict";var i=n(504),r=n(296),s=n(529),o=n(187).EventEmitter,a=n(630),l=n(10),c=n(81),h=n(236),u=n(227),d=n(395),p=n(645),m=n(537);function f(t){this._eventEmitter=new o,this.options=s({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new p}f.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=t.onAdd();e.appendChild(n)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const n=document.querySelectorAll(t);if(0===n.length)throw new Error("Element ",t,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new h(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",r(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(t){this.eventManager.keyevent(t,this)}.bind(this));var s=document.createElement("div");s.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),s.appendChild(this._clearEl),s.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(s),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(a),s.appendChild(this._geolocateEl),this._showGeolocateButton()}var u=this._typeahead=new i(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),u.getItemValue=this.options.getItemValue;var d,p=u.list.draw,m=this._footerNode=((d=document.createElement("div")).className="mapboxgl-ctrl-geocoder--powered-by",d.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',d);return u.list.draw=function(){p.call(this),m.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),m.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(m)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const t=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(t),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(n).send().then(function(t){const n=t.body.features[0];if(n){const t=m.transformFeatureToGeolocationText(n,this.options.addressAccuracy);this._setInputValue(t),n.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:n})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(t){1===t.code?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=e,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var i=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!i||!i.value)return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),t.metaKey||-1!==[n,e,37,39,13,38,40].indexOf(t.keyCode)||i.value.length>=this.options.minLength&&this._geocode(i.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&a[t.properties.short_code])e=s({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var n=t.bbox;e=s({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{var i={zoom:this.options.zoom};e=s({},i,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){return t.localGeocoderOnly?1:t.reverseGeocode&&m.REVERSE_GEOCODE_COORD_RGX.test(e)?2:0},_setupConfig:function(t,e){const n=/[\s,]+/;var i=this,r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"].reduce((function(t,e){if(void 0===i.options[e]||null===i.options[e])return t;["countries","types","language"].indexOf(e)>-1?t[e]=i.options[e].split(n):t[e]=i.options[e];const r="number"==typeof i.options[e].longitude&&"number"==typeof i.options[e].latitude;if("proximity"===e&&r){const n=i.options[e].longitude,r=i.options[e].latitude;t[e]=[n,r]}return t}),{});switch(t){case 2:var o=e.split(n).map((function(t){return parseFloat(t,10)}));i.options.flipCoordinates||o.reverse(),!r.types||r.types[0],r=s(r,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach((function(t){t in r&&delete r[t]}));break;case 0:{const t=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(t)&&(e=e.replace(/,/g," ")),r=s(r,{query:e})}}return r},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),n=this._setupConfig(e,t);var i;switch(e){case 1:i=Promise.resolve();break;case 0:i=this.geocoderService.forwardGeocode(n).send();break;case 2:i=this.geocoderService.reverseGeocode(n).send()}var r=this.options.localGeocoder&&this.options.localGeocoder(t)||[],s=[],o=null;return i.catch(function(t){o=t}.bind(this)).then(function(e){this._hideLoadingIcon();var i={};return e?"200"==e.statusCode&&((i=e.body).request=e.request,i.headers=e.headers):i={type:"FeatureCollection",features:[]},i.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features=i.features?r.concat(i.features):r,this.options.externalGeocoder?(s=this.options.externalGeocoder(t,i.features)||Promise.resolve([])).then((function(t){return i.features=i.features?t.concat(i.features):t,i}),(function(){return i})):i}.bind(this)).then(function(t){if(o)throw o;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._hideLoadingIcon(),this._hideAttribution(),r.length&&this.options.localGeocoder||s.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(r)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:r}),this._eventEmitter.emit("error",{error:t})}.bind(this)),i},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map&&this.options.trackProximity)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderLocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderUserDeniedGeolocationError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=d.language(t),n=u.placeholder[e];if(n)return n}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t,e=!0){return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=c(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e=s({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=f},227:t=>{"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"}}},537:t=>{function e(t){const e=t.address||"",n=t.text||"",i=t.place_name||"",r={address:i.split(",")[0],houseNumber:e,street:n,placeName:i};return t.context.forEach((function(t){const e=t.id.split(".")[0];r[e]=t.text})),r}t.exports={transformFeatureToGeolocationText:function(t,n){const i=e(t),r=["address","street","place","country"];if("function"==typeof n)return n(i);const s=r.indexOf(n);return(-1===s?r:r.slice(s)).reduce((function(t,e){return i[e]?(""!==t&&(t+=", "),t+i[e]):t}),"")},getAddressInfo:e,REVERSE_GEOCODE_COORD_RGX:/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/}},10:(t,e,n)=>{"use strict";var i=n(543);t.exports=i},543:(t,e,n)=>{"use strict";var i=n(366),r=n(503);function s(t){r.call(this,t)}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.sendRequest=i.browserSend,s.prototype.abortRequest=i.browserAbort,t.exports=function(t){return new s(t)}},366:(t,e,n)=>{"use strict";var i=n(293),r=n(404),s=n(835),o=n(614),a={};function l(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function c(t,e){return new Promise((function(n,i){e.onprogress=function(e){t.emitter.emit(s.EVENT_PROGRESS_DOWNLOAD,l(e))};var o=t.file;o&&(e.upload.onprogress=function(e){t.emitter.emit(s.EVENT_PROGRESS_UPLOAD,l(e))}),e.onerror=function(t){i(t)},e.onabort=function(){var e=new r({request:t,type:s.ERROR_REQUEST_ABORTED});i(e)},e.onload=function(){if(delete a[t.id],e.status<200||e.status>=400){var s=new r({request:t,body:e.response,statusCode:e.status});i(s)}else n(e)};var c=t.body;"string"==typeof c?e.send(c):c?e.send(JSON.stringify(c)):o?e.send(o):e.send(),a[t.id]=e})).then((function(e){return function(t,e){return new i(t,{body:e.response,headers:o(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)}))}function h(t,e){var n=t.url(e),i=new window.XMLHttpRequest;return i.open(t.method,n),Object.keys(t.headers).forEach((function(e){i.setRequestHeader(e,t.headers[e])})),i}t.exports={browserAbort:function(t){var e=a[t.id];e&&(e.abort(),delete a[t.id])},sendRequestXhr:c,browserSend:function(t){return Promise.resolve().then((function(){var e=h(t,t.client.accessToken);return c(t,e)}))},createRequestXhr:h}},503:(t,e,n)=>{"use strict";var i=n(713),r=n(225),s=n(835);function o(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");i(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||s.API_ORIGIN}o.prototype.createRequest=function(t){return new r(this,t)},t.exports=o},404:(t,e,n)=>{"use strict";var i=n(835);t.exports=function(t){var e,n=t.type||i.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(n){e=t.body}else e=null;var r=t.message||null;r||("string"==typeof e?r=e:e&&"string"==typeof e.message?r=e.message:n===i.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},225:(t,e,n)=>{"use strict";var i=n(713),r=n(529),s=n(729),o=n(959),a=n(835),l=1;function c(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var i=r(n,e.headers),o=Object.keys(i).reduce((function(t,e){return t[e.toLowerCase()]=i[e],t}),{});this.id=l++,this._options=e,this.emitter=new s,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=o}c.prototype.url=function(t){var e=o.prependOrigin(this.path,this.origin);e=o.appendQueryObject(e,this.query);var n=this.params,s=null==t?this.client.accessToken:t;if(s){e=o.appendQueryParam(e,"access_token",s);var a=i(s).user;n=r({ownerId:a},n)}return e=o.interpolateRouteParams(e,n)},c.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then((function(e){return t.response=e,t.emitter.emit(a.EVENT_RESPONSE,e),e}),(function(e){throw t.error=e,t.emitter.emit(a.EVENT_ERROR,e),e}))},c.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},c.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,(function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,r(t))}))}function i(e){t(e,null,(function(){}))}function r(t){t.send().then(n,i)}r(this)},c.prototype.clone=function(){return this._extend()},c.prototype._extend=function(t){var e=r(this._options,t);return new c(this.client,e)},t.exports=c},293:(t,e,n)=>{"use strict";var i=n(626);function r(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(t){this.body=e.body}this.links=i(this.headers.link)}r.prototype.hasNextPage=function(){return!!this.links.next},r.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=r},835:t=>{"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},614:t=>{"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach((function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value})),e):e}},626:t=>{"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce((function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],i=e[2].split(";"),r=null,s=i.reduce((function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(r||(r=n.value),t):(t[n.key]=n.value,t):t}),{});return r?{url:n,rel:r,params:s}:null}(e);return n?(n.rel.split(/\s+/).forEach((function(e){t[e]||(t[e]={url:n.url,params:n.params})})),t):t}),{}):{}}},959:t=>{"use strict";function e(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function n(t,n,i){if(!1===i||null===i)return t;var r=/\?/.test(t)?"&":"?",s=encodeURIComponent(n);return void 0!==i&&""!==i&&!0!==i&&(s+="="+e(i)),""+t+r+s}t.exports={appendQueryObject:function(t,e){if(!e)return t;var i=t;return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter((function(t){return null!=t})).join(",")),i=n(i,t,r))})),i},appendQueryParam:n,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,n){return n?t.replace(/\/:([a-zA-Z0-9]+)/g,(function(t,i){var r=n[i];if(void 0===r)throw new Error("Unspecified route parameter "+i);return"/"+e(r)})):t}}},81:(t,e,n)=>{"use strict";var i=n(529),r=n(222),s=n(497),o=n(886),a=n(583),l={},c=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(t){r.assertShape({query:r.required(r.string),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),proximity:r.oneOf(r.coordinates,"ip"),types:r.arrayOf(r.oneOf(c)),autocomplete:r.boolean,bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),routing:r.boolean,fuzzyMatch:r.boolean,worldview:r.string})(t),t.mode=t.mode||"mapbox.places";var e=o(i({country:t.countries},s(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(t,["mode","query"]),query:e})},l.reverseGeocode=function(t){r.assertShape({query:r.required(r.coordinates),mode:r.oneOf("mapbox.places","mapbox.places-permanent"),countries:r.arrayOf(r.string),types:r.arrayOf(r.oneOf(c)),bbox:r.arrayOf(r.number),limit:r.number,language:r.arrayOf(r.string),reverseMode:r.oneOf("distance","score"),routing:r.boolean,worldview:r.string})(t),t.mode=t.mode||"mapbox.places";var e=o(i({country:t.countries},s(t,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:s(t,["mode","query"]),query:e})},t.exports=a(l)},583:(t,e,n)=>{"use strict";var i=n(503),r=n(543);t.exports=function(t){return function(e){var n;n=i.prototype.isPrototypeOf(e)?e:r(e);var s=Object.create(t);return s.client=n,s}}},436:t=>{"use strict";t.exports=function(t,e){return Object.keys(t).reduce((function(n,i){return n[i]=e(i,t[i]),n}),{})}},497:t=>{"use strict";t.exports=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter((function(e){return n(e,t[e])})).reduce((function(e,n){return e[n]=t[n],e}),{})}},886:(t,e,n)=>{"use strict";var i=n(436);t.exports=function(t){return i(t,(function(t,e){return"boolean"==typeof e?JSON.stringify(e):e}))}},222:(t,e,n)=>{"use strict";var i=n(529),r=n(532);t.exports=i(r,{file:function(t){if("undefined"!=typeof window){if(t instanceof n.g.Blob||t instanceof n.g.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){var e="date";if("boolean"==typeof t)return e;try{var n=new Date(t);if(n.getTime&&isNaN(n.getTime()))return e}catch(t){return e}},coordinates:function(t){return r.tuple(r.number,r.number)(t)},assertShape:function(t,e){return r.assert(r.strictShape(t),e)}})},713:(t,e,n)=>{"use strict";var i=n(501),r={};function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(r[t])return r[t];var e=t.split("."),n=e[0],o=e[1];if(!o)throw new Error("Invalid token");var a=function(t){try{return JSON.parse(i.decode(t))}catch(t){throw new Error("Invalid token")}}(o),l={usage:n,user:a.u};return s(a,"a")&&(l.authorization=a.a),s(a,"exp")&&(l.expires=1e3*a.exp),s(a,"iat")&&(l.created=1e3*a.iat),s(a,"scopes")&&(l.scopes=a.scopes),s(a,"client")&&(l.client=a.client),s(a,"ll")&&(l.lastLogin=a.ll),s(a,"iu")&&(l.impersonator=a.iu),r[t]=l,l}},245:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Connection:()=>f,ConnectionMonitor:()=>l,Consumer:()=>y,INTERNAL:()=>c,Subscription:()=>g,SubscriptionGuarantor:()=>v,Subscriptions:()=>b,adapters:()=>i,createConsumer:()=>_,createWebSocketURL:()=>w,getConfig:()=>E,logger:()=>r});const i={logger:self.console,WebSocket:self.WebSocket},r={log(...t){this.enabled&&(t.push(Date.now()),i.logger.log("[ActionCable]",...t))}},s=()=>(new Date).getTime(),o=t=>(s()-t)/1e3;class a{constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=s(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),r.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=s(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),r.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=s()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,r.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=s(),r.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout((()=>{this.reconnectIfStale(),this.poll()}),this.getPollInterval())}getPollInterval(){const{staleThreshold:t,reconnectionBackoffRate:e}=this.constructor;return 1e3*t*Math.pow(1+e,Math.min(this.reconnectAttempts,10))*(1+(0===this.reconnectAttempts?1:e)*Math.random())}reconnectIfStale(){this.connectionIsStale()&&(r.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${o(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?r.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${o(this.disconnectedAt)} s`):(r.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return o(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&o(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){"visible"===document.visibilityState&&setTimeout((()=>{!this.connectionIsStale()&&this.connection.isOpen()||(r.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())}),200)}}a.staleThreshold=6,a.reconnectionBackoffRate=.15;const l=a,c={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},{message_types:h,protocols:u}=c,d=u.slice(0,u.length-1),p=[].indexOf;class m{constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new l(this),this.disconnected=!0}send(t){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(t)),!0)}open(){return this.isActive()?(r.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(r.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${u}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new i.WebSocket(this.consumer.url,u),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(r.log(`Reopening WebSocket, current state is ${this.getState()}`),!this.isActive())return this.open();try{return this.close()}catch(t){r.log("Failed to reopen WebSocket",t)}finally{r.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return p.call(d,this.getProtocol())>=0}isState(...t){return p.call(t,this.getState())>=0}getState(){if(this.webSocket)for(let t in i.WebSocket)if(i.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase();return null}installEventHandlers(){for(let t in this.events){const e=this.events[t].bind(this);this.webSocket[`on${t}`]=e}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}}m.reopenDelay=500,m.prototype.events={message(t){if(!this.isProtocolSupported())return;const{identifier:e,message:n,reason:i,reconnect:s,type:o}=JSON.parse(t.data);switch(o){case h.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case h.disconnect:return r.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:s});case h.ping:return this.monitor.recordPing();case h.confirmation:return this.subscriptions.confirmSubscription(e),this.subscriptions.notify(e,"connected");case h.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(r.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return r.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(r.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){r.log("WebSocket onerror event")}};const f=m;class g{constructor(t,e={},n){this.consumer=t,this.identifier=JSON.stringify(e),function(t,e){if(null!=e)for(let n in e){const i=e[n];t[n]=i}}(this,n)}perform(t,e={}){return e.action=t,this.send(e)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}const v=class{constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){-1==this.pendingSubscriptions.indexOf(t)?(r.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):r.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){r.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter((e=>e!==t))}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout((()=>{this.subscriptions&&"function"==typeof this.subscriptions.subscribe&&this.pendingSubscriptions.map((t=>{r.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)}))}),500)}};class b{constructor(t){this.consumer=t,this.guarantor=new v(this),this.subscriptions=[]}create(t,e){const n="object"==typeof t?t:{channel:t},i=new g(this.consumer,n,e);return this.add(i)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map((t=>(this.forget(t),this.notify(t,"rejected"),t)))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter((e=>e!==t)),t}findAll(t){return this.subscriptions.filter((e=>e.identifier===t))}reload(){return this.subscriptions.map((t=>this.subscribe(t)))}notifyAll(t,...e){return this.subscriptions.map((n=>this.notify(n,t,...e)))}notify(t,e,...n){let i;return i="string"==typeof t?this.findAll(t):[t],i.map((t=>"function"==typeof t[e]?t[e](...n):void 0))}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){r.log(`Subscription confirmed ${t}`),this.findAll(t).map((t=>this.guarantor.forget(t)))}sendCommand(t,e){const{identifier:n}=t;return this.consumer.send({command:e,identifier:n})}}class y{constructor(t){this._url=t,this.subscriptions=new b(this),this.connection=new f(this)}get url(){return w(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}function w(t){if("function"==typeof t&&(t=t()),t&&!/^wss?:/i.test(t)){const e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}return t}function _(t=E("url")||c.default_mount_path){return new y(t)}function E(t){const e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}},501:function(t,e,n){var i;t=n.nmd(t),function(r){var s=(t&&t.exports,"object"==typeof n.g&&n.g);s.global!==s&&s.window;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var a=function(t){throw new o(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,h={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,i,r,s=t.length%3,o="",c=-1,h=t.length-s;++c<h;)e=t.charCodeAt(c)<<16,n=t.charCodeAt(++c)<<8,i=t.charCodeAt(++c),o+=l.charAt((r=e+n+i)>>18&63)+l.charAt(r>>12&63)+l.charAt(r>>6&63)+l.charAt(63&r);return 2==s?(e=t.charCodeAt(c)<<8,n=t.charCodeAt(++c),o+=l.charAt((r=e+n)>>10)+l.charAt(r>>4&63)+l.charAt(r<<2&63)+"="):1==s&&(r=t.charCodeAt(c),o+=l.charAt(r>>2)+l.charAt(r<<4&63)+"=="),o},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,s="",o=-1;++o<e;)i=l.indexOf(t.charAt(o)),n=r%4?64*n+i:i,r++%4&&(s+=String.fromCharCode(255&n>>(-2*r&6)));return s},version:"0.1.0"};void 0===(i=function(){return h}.call(e,n,e,t))||(t.exports=i)}()},729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,s),!0;case 6:return h.fn.call(h.context,e,i,r,s,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var d,p=h.length;for(c=0;c<p;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,i);break;case 4:h[c].fn.call(h[c].context,e,i,r);break;default:if(!l)for(d=1,l=new Array(u-1);d<u;d++)l[d-1]=arguments[d];h[c].fn.apply(h[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,c=[],h=a.length;l<h;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,s),i(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}f(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&f(t,"error",e,{once:!0})}(t,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function c(t,e,n,i){var r,s,o,c;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=l(t))>0&&o.length>r&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=o.length,c=h,console&&console.warn&&console.warn(c)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function d(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function f(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){i.once&&t.removeEventListener(e,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[t];if(void 0===l)return!1;if("function"==typeof l)i(l,this,e);else{var c=l.length,h=m(l,c);for(n=0;n<c;++n)i(h[n],this,e)}return!0},s.prototype.addListener=function(t,e){return c(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return c(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,u(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,u(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,s,o;if(a(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},261:t=>{var e;e={},t.exports=e,e.simpleFilter=function(t,n){return n.filter((function(n){return e.test(t,n)}))},e.test=function(t,n){return null!==e.match(t,n)},e.match=function(t,e,n){n=n||{};var i,r=0,s=[],o=e.length,a=0,l=0,c=n.pre||"",h=n.post||"",u=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var d=0;d<o;d++)i=e[d],u[d]===t[r]?(i=c+i+h,r+=1,l+=1+l):l=0,a+=l,s[s.length]=i;return r===t.length?(a=u===t?1/0:a,{rendered:s.join(""),score:a}):null},e.filter=function(t,n,i){return n&&0!==n.length?"string"!=typeof t?n:(i=i||{},n.reduce((function(n,r,s,o){var a=r;i.extract&&(a=i.extract(r));var l=e.match(t,a,i);return null!=l&&(n[n.length]={string:l.rendered,score:l.score,index:s,original:r}),n}),[]).sort((function(t,e){return e.score-t.score||t.index-e.index}))):[]}},310:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n;return"[object Object]"===e.call(t)&&(null===(n=Object.getPrototypeOf(t))||n===Object.getPrototypeOf({}))}},296:(t,e,n)=>{var i=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=h||u||Function("return this")(),p=Object.prototype.toString,m=Math.max,f=Math.min,g=function(){return d.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return i;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=a.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):o.test(t)?i:+t}t.exports=function(t,e,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,s=r;return i=r=void 0,c=e,o=t.apply(s,n)}function y(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=s}function w(){var t=g();if(y(t))return _(t);a=setTimeout(w,function(t){var n=e-(t-l);return u?f(n,s-(t-c)):n}(t))}function _(t){return a=void 0,d&&i?p(t):(i=r=void 0,o)}function E(){var t=g(),n=y(t);if(i=arguments,r=this,l=t,n){if(void 0===a)return function(t){return c=t,a=setTimeout(w,e),h?p(t):o}(l);if(u)return a=setTimeout(w,e),p(l)}return void 0===a&&(a=setTimeout(w,e)),o}return e=b(e)||0,v(n)&&(h=!!n.leading,s=(u="maxWait"in n)?m(b(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),E.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},E.flush=function(){return void 0===a?o:_(g())},E}},363:function(t,e,n){var i,r;(function(){(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(this);var s=this.Rails;(function(){(function(){var t;t=null,s.loadCSPNonce=function(){var e;return t=null!=(e=document.querySelector("meta[name=csp-nonce]"))?e.content:void 0},s.cspNonce=function(){return null!=t?t:s.loadCSPNonce()}}).call(this),function(){var t,e;e=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,s.matches=function(t,n){return null!=n.exclude?e.call(t,n.selector)&&!e.call(t,n.exclude):e.call(t,n)},t="_ujsData",s.getData=function(e,n){var i;return null!=(i=e[t])?i[n]:void 0},s.setData=function(e,n,i){return null==e[t]&&(e[t]={}),e[t][n]=i},s.$=function(t){return Array.prototype.slice.call(document.querySelectorAll(t))}}.call(this),function(){var t,e,n;t=s.$,n=s.csrfToken=function(){var t;return(t=document.querySelector("meta[name=csrf-token]"))&&t.content},e=s.csrfParam=function(){var t;return(t=document.querySelector("meta[name=csrf-param]"))&&t.content},s.CSRFProtection=function(t){var e;if(null!=(e=n()))return t.setRequestHeader("X-CSRF-Token",e)},s.refreshCSRFTokens=function(){var i,r;if(r=n(),i=e(),null!=r&&null!=i)return t('form input[name="'+i+'"]').forEach((function(t){return t.value=r}))}}.call(this),function(){var t,e,n,i;n=s.matches,"function"!=typeof(t=window.CustomEvent)&&((t=function(t,e){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,i=t.prototype.preventDefault,t.prototype.preventDefault=function(){var t;return t=i.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),t}),e=s.fire=function(e,n,i){var r;return r=new t(n,{bubbles:!0,cancelable:!0,detail:i}),e.dispatchEvent(r),!r.defaultPrevented},s.stopEverything=function(t){return e(t.target,"ujs:everythingStopped"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},s.delegate=function(t,e,i,r){return t.addEventListener(i,(function(t){var i;for(i=t.target;i instanceof Element&&!n(i,e);)i=i.parentNode;if(i instanceof Element&&!1===r.call(i,t))return t.preventDefault(),t.stopPropagation()}))}}.call(this),function(){var t,e,n,i,r,o;i=s.cspNonce,e=s.CSRFProtection,s.fire,t={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},s.ajax=function(t){var e;return t=r(t),e=n(t,(function(){var n,i;return i=o(null!=(n=e.response)?n:e.responseText,e.getResponseHeader("Content-Type")),2===Math.floor(e.status/100)?"function"==typeof t.success&&t.success(i,e.statusText,e):"function"==typeof t.error&&t.error(i,e.statusText,e),"function"==typeof t.complete?t.complete(e,e.statusText):void 0})),!(null!=t.beforeSend&&!t.beforeSend(e,t))&&(e.readyState===XMLHttpRequest.OPENED?e.send(t.data):void 0)},r=function(e){return e.url=e.url||location.href,e.type=e.type.toUpperCase(),"GET"===e.type&&e.data&&(e.url.indexOf("?")<0?e.url+="?"+e.data:e.url+="&"+e.data),null==t[e.dataType]&&(e.dataType="*"),e.accept=t[e.dataType],"*"!==e.dataType&&(e.accept+=", */*; q=0.01"),e},n=function(t,n){var i;return(i=new XMLHttpRequest).open(t.type,t.url,!0),i.setRequestHeader("Accept",t.accept),"string"==typeof t.data&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.crossDomain||(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e(i)),i.withCredentials=!!t.withCredentials,i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)return n(i)},i},o=function(t,e){var n,r;if("string"==typeof t&&"string"==typeof e)if(e.match(/\bjson\b/))try{t=JSON.parse(t)}catch(t){}else if(e.match(/\b(?:java|ecma)script\b/))(r=document.createElement("script")).setAttribute("nonce",i()),r.text=t,document.head.appendChild(r).parentNode.removeChild(r);else if(e.match(/\b(xml|html|svg)\b/)){n=new DOMParser,e=e.replace(/;.+/,"");try{t=n.parseFromString(t,e)}catch(t){}}return t},s.href=function(t){return t.href},s.isCrossDomain=function(t){var e,n;(e=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=t,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(t){return!0}}}.call(this),function(){var t,e;t=s.matches,e=function(t){return Array.prototype.slice.call(t)},s.serializeElement=function(n,i){var r,s;return r=[n],t(n,"form")&&(r=e(n.elements)),s=[],r.forEach((function(n){if(n.name&&!n.disabled)return t(n,"select")?e(n.options).forEach((function(t){if(t.selected)return s.push({name:n.name,value:t.value})})):n.checked||-1===["radio","checkbox","submit"].indexOf(n.type)?s.push({name:n.name,value:n.value}):void 0})),i&&s.push(i),s.map((function(t){return null!=t.name?encodeURIComponent(t.name)+"="+encodeURIComponent(t.value):t})).join("&")},s.formElements=function(n,i){return t(n,"form")?e(n.elements).filter((function(e){return t(e,i)})):e(n.querySelectorAll(i))}}.call(this),function(){var t,e,n;e=s.fire,n=s.stopEverything,s.handleConfirm=function(e){if(!t(this))return n(e)},t=function(t){var n,i,r;if(!(r=t.getAttribute("data-confirm")))return!0;if(n=!1,e(t,"confirm")){try{n=confirm(r)}catch(t){}i=e(t,"confirm:complete",[n])}return n&&i}}.call(this),function(){var t,e,n,i,r,o,a,l,c,h,u;c=s.matches,l=s.getData,h=s.setData,u=s.stopEverything,a=s.formElements,s.handleDisabledElement=function(t){if(this.disabled)return u(t)},s.enableElement=function(t){var e;return e=t instanceof Event?t.target:t,c(e,s.linkDisableSelector)?o(e):c(e,s.buttonDisableSelector)||c(e,s.formEnableSelector)?i(e):c(e,s.formSubmitSelector)?r(e):void 0},s.disableElement=function(i){var r;return r=i instanceof Event?i.target:i,c(r,s.linkDisableSelector)?n(r):c(r,s.buttonDisableSelector)||c(r,s.formDisableSelector)?t(r):c(r,s.formSubmitSelector)?e(r):void 0},n=function(t){var e;return null!=(e=t.getAttribute("data-disable-with"))&&(h(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e),t.addEventListener("click",u),h(t,"ujs:disabled",!0)},o=function(t){var e;return null!=(e=l(t,"ujs:enable-with"))&&(t.innerHTML=e,h(t,"ujs:enable-with",null)),t.removeEventListener("click",u),h(t,"ujs:disabled",null)},e=function(e){return a(e,s.formDisableSelector).forEach(t)},t=function(t){var e;return null!=(e=t.getAttribute("data-disable-with"))&&(c(t,"button")?(h(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e):(h(t,"ujs:enable-with",t.value),t.value=e)),t.disabled=!0,h(t,"ujs:disabled",!0)},r=function(t){return a(t,s.formEnableSelector).forEach(i)},i=function(t){var e;return null!=(e=l(t,"ujs:enable-with"))&&(c(t,"button")?t.innerHTML=e:t.value=e,h(t,"ujs:enable-with",null)),t.disabled=!1,h(t,"ujs:disabled",null)}}.call(this),function(){var t;t=s.stopEverything,s.handleMethod=function(e){var n,i,r,o,a,l,c;if(c=(l=this).getAttribute("data-method"))return a=s.href(l),i=s.csrfToken(),n=s.csrfParam(),r=document.createElement("form"),o="<input name='_method' value='"+c+"' type='hidden' />",null==n||null==i||s.isCrossDomain(a)||(o+="<input name='"+n+"' value='"+i+"' type='hidden' />"),o+='<input type="submit" />',r.method="post",r.action=a,r.target=l.target,r.innerHTML=o,r.style.display="none",document.body.appendChild(r),r.querySelector('[type="submit"]').click(),t(e)}}.call(this),function(){var t,e,n,i,r,o,a,l,c,h=[].slice;o=s.matches,n=s.getData,l=s.setData,e=s.fire,c=s.stopEverything,t=s.ajax,i=s.isCrossDomain,a=s.serializeElement,r=function(t){var e;return null!=(e=t.getAttribute("data-remote"))&&"false"!==e},s.handleRemote=function(u){var d,p,m,f,g,v,b;return!r(f=this)||(e(f,"ajax:before")?(b=f.getAttribute("data-with-credentials"),m=f.getAttribute("data-type")||"script",o(f,s.formSubmitSelector)?(d=n(f,"ujs:submit-button"),g=n(f,"ujs:submit-button-formmethod")||f.method,v=n(f,"ujs:submit-button-formaction")||f.getAttribute("action")||location.href,"GET"===g.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===f.enctype?(p=new FormData(f),null!=d&&p.append(d.name,d.value)):p=a(f,d),l(f,"ujs:submit-button",null),l(f,"ujs:submit-button-formmethod",null),l(f,"ujs:submit-button-formaction",null)):o(f,s.buttonClickSelector)||o(f,s.inputChangeSelector)?(g=f.getAttribute("data-method"),v=f.getAttribute("data-url"),p=a(f,f.getAttribute("data-params"))):(g=f.getAttribute("data-method"),v=s.href(f),p=f.getAttribute("data-params")),t({type:g||"GET",url:v,data:p,dataType:m,beforeSend:function(t,n){return e(f,"ajax:beforeSend",[t,n])?e(f,"ajax:send",[t]):(e(f,"ajax:stopped"),!1)},success:function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e(f,"ajax:success",t)},error:function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e(f,"ajax:error",t)},complete:function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e(f,"ajax:complete",t)},crossDomain:i(v),withCredentials:null!=b&&"false"!==b}),c(u)):(e(f,"ajax:stopped"),!1))},s.formSubmitButtonClick=function(t){var e,n;if(n=(e=this).form)return e.name&&l(n,"ujs:submit-button",{name:e.name,value:e.value}),l(n,"ujs:formnovalidate-button",e.formNoValidate),l(n,"ujs:submit-button-formaction",e.getAttribute("formaction")),l(n,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},s.preventInsignificantClick=function(t){var e,n,i;if(i=(this.getAttribute("data-method")||"GET").toUpperCase(),e=this.getAttribute("data-params"),n=(t.metaKey||t.ctrlKey)&&"GET"===i&&!e,null!=t.button&&0!==t.button||n)return t.stopImmediatePropagation()}}.call(this),function(){var t,e,n,i,r,o,a,l,c,h,u,d,p,m,f;if(o=s.fire,n=s.delegate,l=s.getData,t=s.$,f=s.refreshCSRFTokens,e=s.CSRFProtection,p=s.loadCSPNonce,r=s.enableElement,i=s.disableElement,h=s.handleDisabledElement,c=s.handleConfirm,m=s.preventInsignificantClick,d=s.handleRemote,a=s.formSubmitButtonClick,u=s.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=s,jQuery.ajaxPrefilter((function(t,n,i){if(!t.crossDomain)return e(i)}))}s.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",(function(){return t(s.formEnableSelector).forEach((function(t){if(l(t,"ujs:disabled"))return r(t)})),t(s.linkDisableSelector).forEach((function(t){if(l(t,"ujs:disabled"))return r(t)}))})),n(document,s.linkDisableSelector,"ajax:complete",r),n(document,s.linkDisableSelector,"ajax:stopped",r),n(document,s.buttonDisableSelector,"ajax:complete",r),n(document,s.buttonDisableSelector,"ajax:stopped",r),n(document,s.linkClickSelector,"click",m),n(document,s.linkClickSelector,"click",h),n(document,s.linkClickSelector,"click",c),n(document,s.linkClickSelector,"click",i),n(document,s.linkClickSelector,"click",d),n(document,s.linkClickSelector,"click",u),n(document,s.buttonClickSelector,"click",m),n(document,s.buttonClickSelector,"click",h),n(document,s.buttonClickSelector,"click",c),n(document,s.buttonClickSelector,"click",i),n(document,s.buttonClickSelector,"click",d),n(document,s.inputChangeSelector,"change",h),n(document,s.inputChangeSelector,"change",c),n(document,s.inputChangeSelector,"change",d),n(document,s.formSubmitSelector,"submit",h),n(document,s.formSubmitSelector,"submit",c),n(document,s.formSubmitSelector,"submit",d),n(document,s.formSubmitSelector,"submit",(function(t){return setTimeout((function(){return i(t)}),13)})),n(document,s.formSubmitSelector,"ajax:send",i),n(document,s.formSubmitSelector,"ajax:complete",r),n(document,s.formInputClickSelector,"click",m),n(document,s.formInputClickSelector,"click",h),n(document,s.formInputClickSelector,"click",c),n(document,s.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",f),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===s&&o(document,"rails:attachBindings")&&s.start()}.call(this)}).call(this),t.exports?t.exports=s:void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r)}).call(this)},395:function(t){var e;e=function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(t){return t.match(e)||[]}function i(e){return{language:(e=n(e))[1]||t,extlang:e[2]||t,script:e[3]||t,region:e[4]||t}}function r(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function s(e,s,o){function a(i){return n(i)[e]||t}r(a,"pattern",s),r(i,o,a)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(i,"split",(function(t){return n(t).filter((function(t,e){return t&&e}))})),i},t.exports?t.exports=e():this.subtag=e()},504:(t,e,n)=>{"use strict";var i=n(247);t.exports=i,"undefined"!=typeof window&&(window.Suggestions=i)},945:t=>{"use strict";var e=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.add=function(t){this.items.push(t)},e.prototype.clear=function(){this.items=[],this.active=0},e.prototype.isEmpty=function(){return!this.items.length},e.prototype.isVisible=function(){return"block"===this.element.style.display},e.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},e.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},e.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},e.prototype.move=function(t){this.active=t,this.draw()},e.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},e.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},e.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=e},247:(t,e,n)=>{"use strict";var i=n(529),r=n(261),s=n(945),o=function(t,e,n){return n=n||{},this.options=i({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=t,this.data=e||[],this.list=new s(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};o.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},o.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},o.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},o.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},o.prototype.update=function(t){this.data=t,this.handleKeyUp()},o.prototype.clear=function(){this.data=[],this.list.clear()},o.prototype.normalize=function(t){return t.toLowerCase()},o.prototype.match=function(t,e){return t.indexOf(e)>-1},o.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?r.filter(this.query,this.data,e).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)))},o.prototype.getItemValue=function(t){return t},o.prototype.render=function(t,e){if(e)return e;for(var n=t.original?this.getItemValue(t.original):this.getItemValue(t),i=this.normalize(n),r=i.lastIndexOf(this.query);r>-1;){var s=r+this.query.length;n=n.slice(0,r)+"<strong>"+n.slice(r,s)+"</strong>"+n.slice(s),r=i.slice(0,r).lastIndexOf(this.query)}return n},o.prototype.renderError=function(t){this.list.drawError(t)},t.exports=o},529:t=>{t.exports=function(){for(var t={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)e.call(i,r)&&(t[r]=i[r])}return t};var e=Object.prototype.hasOwnProperty},416:(t,e,n)=>{"use strict";n.d(e,{x0:()=>i});let i=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")),"")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{afterMain:()=>or,afterRead:()=>ir,afterWrite:()=>cr,applyStyles:()=>gr,arrow:()=>Nr,auto:()=>zi,basePlacements:()=>Ui,beforeMain:()=>rr,beforeRead:()=>er,beforeWrite:()=>ar,bottom:()=>Hi,clippingParents:()=>Xi,computeStyles:()=>$r,createPopper:()=>fs,createPopperBase:()=>ms,createPopperLite:()=>gs,detectOverflow:()=>es,end:()=>Gi,eventListeners:()=>Hr,flip:()=>ns,hide:()=>ss,left:()=>Wi,main:()=>sr,modifierPhases:()=>hr,offset:()=>os,placements:()=>tr,popper:()=>Qi,popperGenerator:()=>ps,popperOffsets:()=>as,preventOverflow:()=>ls,read:()=>nr,reference:()=>Ji,right:()=>Vi,start:()=>Ki,top:()=>qi,variationPlacements:()=>Zi,viewport:()=>Yi,write:()=>lr}),function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}(),function(t){function e(t,e,n){throw new t("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+e+".",n)}"function"!=typeof t.requestSubmit&&(t.requestSubmit=function(t){t?(function(t,n){t instanceof HTMLElement||e(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==t.type||e(TypeError,"The specified element is not a submit button"),t.form==n||e(DOMException,"The specified element is not owned by this form element","NotFoundError")}(t,this),t.click()):((t=document.createElement("input")).type="submit",t.hidden=!0,this.appendChild(t),t.click(),this.removeChild(t))})}(HTMLFormElement.prototype);const e=new WeakMap;function i(t){const n=function(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null,n=e?e.closest("input, button"):null;return"submit"==(null==n?void 0:n.type)?n:null}(t.target);n&&n.form&&e.set(n.form,n)}var r,s,o,a,l,c;!function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",i,!0),Object.defineProperty(t,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return e.get(this.target)}})}(),function(t){t.eager="eager",t.lazy="lazy"}(r||(r={}));class h extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new h.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){"loading"==t?this.delegate.loadingStyleChanged():"complete"==t?this.delegate.completeChanged():"src"==t?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get loading(){return"lazy"===(this.getAttribute("loading")||"").toLowerCase()?r.lazy:r.eager}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,e;return null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.documentElement)||void 0===e?void 0:e.hasAttribute("data-turbo-preview")}}function u(t){return new URL(t.toString(),document.baseURI)}function d(t){let e;return t.hash?t.hash.slice(1):(e=t.href.match(/#(.*)$/))?e[1]:void 0}function p(t,e){return u((null==e?void 0:e.getAttribute("formaction"))||t.getAttribute("action")||t.action)}function m(t,e){return function(t,e){const n=function(t){return(e=t.origin+t.pathname).endsWith("/")?e:e+"/";var e}(e);return t.href===u(n).href||t.href.startsWith(n)}(t,e)&&!!(n=t,(function(t){return function(t){return t.pathname.split("/").slice(1)}(t).slice(-1)[0]}(n).match(/\.[^.]*$/)||[])[0]||"").match(/^(?:|\.(?:htm|html|xhtml|php))$/);var n}function f(t){const e=d(t);return null!=e?t.href.slice(0,-(e.length+1)):t.href}function g(t){return f(t)}class v{constructor(t){this.response=t}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return u(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(t){return this.response.headers.get(t)}}function b(t){if("false"==t.getAttribute("data-turbo-eval"))return t;{const e=document.createElement("script"),n=M("csp-nonce");return n&&(e.nonce=n),e.textContent=t.textContent,e.async=!1,function(t,e){for(const{name:n,value:i}of e.attributes)t.setAttribute(n,i)}(e,t),e}}function y(t,{target:e,cancelable:n,detail:i}={}){const r=new CustomEvent(t,{cancelable:n,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function w(){return new Promise((t=>requestAnimationFrame((()=>t()))))}function _(t=""){return(new DOMParser).parseFromString(t,"text/html")}function E(t,...e){const n=function(t,e){return t.reduce(((t,n,i)=>t+n+(null==e[i]?"":e[i])),"")}(t,e).replace(/^\n/,"").split("\n"),i=n[0].match(/^\s+/),r=i?i[0].length:0;return n.map((t=>t.slice(r))).join("\n")}function S(){return Array.from({length:36}).map(((t,e)=>8==e||13==e||18==e||23==e?"-":14==e?"4":19==e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16))).join("")}function A(t,...e){for(const n of e.map((e=>null==e?void 0:e.getAttribute(t))))if("string"==typeof n)return n;return null}function C(...t){for(const e of t)"turbo-frame"==e.localName&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function T(...t){for(const e of t)"turbo-frame"==e.localName&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function k(t,e=2e3){return new Promise((n=>{const i=()=>{t.removeEventListener("error",i),t.removeEventListener("load",i),n()};t.addEventListener("load",i,{once:!0}),t.addEventListener("error",i,{once:!0}),setTimeout(n,e)}))}function O(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function x(...t){const e=A("data-turbo-action",...t);return function(t){return"advance"==t||"replace"==t||"restore"==t}(e)?e:null}function L(t){return document.querySelector(`meta[name="${t}"]`)}function M(t){const e=L(t);return e&&e.content}function P(t,e){var n;if(t instanceof Element)return t.closest(e)||P(t.assignedSlot||(null===(n=t.getRootNode())||void 0===n?void 0:n.host),e)}!function(t){t[t.get=0]="get",t[t.post=1]="post",t[t.put=2]="put",t[t.patch=3]="patch",t[t.delete=4]="delete"}(s||(s={}));class R{constructor(t,e,n,i=new URLSearchParams,r=null){this.abortController=new AbortController,this.resolveRequestPromise=t=>{},this.delegate=t,this.method=e,this.headers=this.defaultHeaders,this.body=i,this.url=n,this.target=r}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:t}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(t);try{this.delegate.requestStarted(this);const e=await fetch(this.url.href,t);return await this.receive(e)}catch(t){if("AbortError"!==t.name)throw this.willDelegateErrorHandling(t)&&this.delegate.requestErrored(this,t),t}finally{this.delegate.requestFinished(this)}}async receive(t){const e=new v(t);return y("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:e},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,e):e.succeeded?this.delegate.requestSucceededWithResponse(this,e):this.delegate.requestFailedWithResponse(this,e),e}get fetchOptions(){var t;return{method:s[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:null===(t=this.delegate.referrer)||void 0===t?void 0:t.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===s.get}get abortSignal(){return this.abortController.signal}acceptResponseType(t){this.headers.Accept=[t,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(t){const e=new Promise((t=>this.resolveRequestPromise=t));y("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:t,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await e}willDelegateErrorHandling(t){return!y("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:t}}).defaultPrevented}}class D{constructor(t,e){this.started=!1,this.intersect=t=>{const e=t.slice(-1)[0];(null==e?void 0:e.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=t,this.element=e,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class I{static wrap(t){return"string"==typeof t?new this(function(t){const e=document.createElement("template");return e.innerHTML=t,e.content}(t)):t}constructor(t){this.fragment=function(t){for(const e of t.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const e of t.templateElement.content.querySelectorAll("script"))e.replaceWith(b(e));e.replaceWith(t)}return t}(t)}}I.contentType="text/vnd.turbo-stream.html",function(t){t[t.initialized=0]="initialized",t[t.requesting=1]="requesting",t[t.waiting=2]="waiting",t[t.receiving=3]="receiving",t[t.stopping=4]="stopping",t[t.stopped=5]="stopped"}(o||(o={})),function(t){t.urlEncoded="application/x-www-form-urlencoded",t.multipart="multipart/form-data",t.plain="text/plain"}(a||(a={}));class N{static confirmMethod(t,e,n){return Promise.resolve(confirm(t))}constructor(t,e,n,i=!1){this.state=o.initialized,this.delegate=t,this.formElement=e,this.submitter=n,this.formData=function(t,e){const n=new FormData(t),i=null==e?void 0:e.getAttribute("name"),r=null==e?void 0:e.getAttribute("value");return i&&n.append(i,r||""),n}(e,n),this.location=u(this.action),this.method==s.get&&function(t,e){const n=new URLSearchParams;for(const[t,i]of e)i instanceof File||n.append(t,i);t.search=n.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new R(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=i}get method(){var t;return function(t){switch(t.toLowerCase()){case"get":return s.get;case"post":return s.post;case"put":return s.put;case"patch":return s.patch;case"delete":return s.delete}}(((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"").toLowerCase())||s.get}get action(){var t;const e="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(t=this.submitter)||void 0===t?void 0:t.hasAttribute("formaction"))?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||e||""}get body(){return this.enctype==a.urlEncoded||this.method==s.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var t;return function(t){switch(t.toLowerCase()){case a.multipart:return a.multipart;case a.plain:return a.plain;default:return a.urlEncoded}}((null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce(((t,[e,n])=>t.concat("string"==typeof n?[[e,n]]:[])),[])}async start(){const{initialized:t,requesting:e}=o,n=A("data-turbo-confirm",this.submitter,this.formElement);if("string"!=typeof n||await N.confirmMethod(n,this.formElement,this.submitter))return this.state==t?(this.state=e,this.fetchRequest.perform()):void 0}stop(){const{stopping:t,stopped:e}=o;if(this.state!=t&&this.state!=e)return this.state=t,this.fetchRequest.cancel(),!0}prepareRequest(t){if(!t.isSafe){const e=function(t){if(null!=t){const e=(document.cookie?document.cookie.split("; "):[]).find((e=>e.startsWith(t)));if(e){const t=e.split("=").slice(1).join("=");return t?decodeURIComponent(t):void 0}}}(M("csrf-param"))||M("csrf-token");e&&(t.headers["X-CSRF-Token"]=e)}this.requestAcceptsTurboStreamResponse(t)&&t.acceptResponseType(I.contentType)}requestStarted(t){var e;this.state=o.waiting,null===(e=this.submitter)||void 0===e||e.setAttribute("disabled",""),this.setSubmitsWith(),y("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(t,e){this.result={success:e.succeeded,fetchResponse:e}}requestSucceededWithResponse(t,e){if(e.clientError||e.serverError)this.delegate.formSubmissionFailedWithResponse(this,e);else if(this.requestMustRedirect(t)&&function(t){return 200==t.statusCode&&!t.redirected}(e)){const t=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,t)}else this.state=o.receiving,this.result={success:!0,fetchResponse:e},this.delegate.formSubmissionSucceededWithResponse(this,e)}requestFailedWithResponse(t,e){this.result={success:!1,fetchResponse:e},this.delegate.formSubmissionFailedWithResponse(this,e)}requestErrored(t,e){this.result={success:!1,error:e},this.delegate.formSubmissionErrored(this,e)}requestFinished(t){var e;this.state=o.stopped,null===(e=this.submitter)||void 0===e||e.removeAttribute("disabled"),this.resetSubmitterText(),y("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(this.submitter&&this.submitsWith)if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const t=this.submitter;this.originalSubmitText=t.value,t.value=this.submitsWith}}resetSubmitterText(){this.submitter&&this.originalSubmitText&&(this.submitter.matches("button")?this.submitter.innerHTML=this.originalSubmitText:this.submitter.matches("input")&&(this.submitter.value=this.originalSubmitText))}requestMustRedirect(t){return!t.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(t){return!t.isSafe||function(t,...e){return e.some((e=>e&&e.hasAttribute(t)))}("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var t;return null===(t=this.submitter)||void 0===t?void 0:t.getAttribute("data-turbo-submits-with")}}class F{constructor(t){this.element=t}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(t){return null!=this.getElementForAnchor(t)}getElementForAnchor(t){return t?this.element.querySelector(`[id='${t}'], a[name='${t}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(const t of this.element.querySelectorAll("[autofocus]"))if(null==t.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])"))return t;return null}get permanentElements(){return B(this.element)}getPermanentElementById(t){return j(this.element,t)}getPermanentElementMapForSnapshot(t){const e={};for(const n of this.permanentElements){const{id:i}=n,r=t.getPermanentElementById(i);r&&(e[i]=[n,r])}return e}}function j(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function B(t){return t.querySelectorAll("[id][data-turbo-permanent]")}class ${constructor(t,e){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=t=>{if(!t.defaultPrevented){const e=t.target instanceof HTMLFormElement?t.target:void 0,n=t.submitter||void 0;e&&function(t,e){return"dialog"!=((null==e?void 0:e.getAttribute("formmethod"))||t.getAttribute("method"))}(e,n)&&function(t,e){if((null==e?void 0:e.hasAttribute("formtarget"))||t.hasAttribute("target")){const n=(null==e?void 0:e.getAttribute("formtarget"))||t.target;for(const t of document.getElementsByName(n))if(t instanceof HTMLIFrameElement)return!1;return!0}return!0}(e,n)&&this.delegate.willSubmitForm(e,n)&&(t.preventDefault(),t.stopImmediatePropagation(),this.delegate.formSubmitted(e,n))}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}class q{constructor(t,e){this.resolveRenderPromise=t=>{},this.resolveInterceptionPromise=t=>{},this.delegate=t,this.element=e}scrollToAnchor(t){const e=this.snapshot.getElementForAnchor(t);e?(this.scrollToElement(e),this.focusElement(e)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(t){this.scrollToAnchor(d(t))}scrollToElement(t){t.scrollIntoView()}focusElement(t){t instanceof HTMLElement&&(t.hasAttribute("tabindex")?t.focus():(t.setAttribute("tabindex","-1"),t.focus(),t.removeAttribute("tabindex")))}scrollToPosition({x:t,y:e}){this.scrollRoot.scrollTo(t,e)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(t){const{isPreview:e,shouldRender:n,newSnapshot:i}=t;if(n)try{this.renderPromise=new Promise((t=>this.resolveRenderPromise=t)),this.renderer=t,await this.prepareToRenderSnapshot(t);const n=new Promise((t=>this.resolveInterceptionPromise=t)),r={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(i,r)||await n,await this.renderSnapshot(t),this.delegate.viewRenderedSnapshot(i,e),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(t)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(t.reloadReason)}invalidate(t){this.delegate.viewInvalidated(t)}async prepareToRenderSnapshot(t){this.markAsPreview(t.isPreview),await t.prepareToRender()}markAsPreview(t){t?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(t){await t.render()}finishRenderingSnapshot(t){t.finishRendering()}}class H extends q{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new F(this.element)}}class V{constructor(t,e){this.clickBubbled=t=>{this.respondsToEventTarget(t.target)?this.clickEvent=t:delete this.clickEvent},this.linkClicked=t=>{this.clickEvent&&this.respondsToEventTarget(t.target)&&t.target instanceof Element&&this.delegate.shouldInterceptLinkClick(t.target,t.detail.url,t.detail.originalEvent)&&(this.clickEvent.preventDefault(),t.preventDefault(),this.delegate.linkClickIntercepted(t.target,t.detail.url,t.detail.originalEvent)),delete this.clickEvent},this.willVisit=t=>{delete this.clickEvent},this.delegate=t,this.element=e}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(t){const e=t instanceof Element?t:t instanceof Node?t.parentElement:null;return e&&e.closest("turbo-frame, html")==this.element}}class W{constructor(t,e){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=t=>{if(t instanceof MouseEvent&&this.clickEventIsSignificant(t)){const e=t.composedPath&&t.composedPath()[0]||t.target,n=this.findLinkFromClickTarget(e);if(n&&function(t){if(t.hasAttribute("target")){for(const e of document.getElementsByName(t.target))if(e instanceof HTMLIFrameElement)return!1;return!0}return!0}(n)){const e=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,e,t)&&(t.preventDefault(),this.delegate.followedLinkToLocation(n,e))}}},this.delegate=t,this.eventTarget=e}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}findLinkFromClickTarget(t){return P(t,"a[href]:not([target^=_]):not([download])")}getLocationForLink(t){return u(t.getAttribute("href")||"")}}class z{constructor(t,e){this.delegate=t,this.linkInterceptor=new W(this,e)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(t,e,n){return this.delegate.willSubmitFormLinkToLocation(t,e,n)&&t.hasAttribute("data-turbo-method")}followedLinkToLocation(t,e){const n=document.createElement("form");for(const[t,i]of e.searchParams)n.append(Object.assign(document.createElement("input"),{type:"hidden",name:t,value:i}));const i=Object.assign(e,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",i.href),n.setAttribute("hidden","");const r=t.getAttribute("data-turbo-method");r&&n.setAttribute("method",r);const s=t.getAttribute("data-turbo-frame");s&&n.setAttribute("data-turbo-frame",s);const o=x(t);o&&n.setAttribute("data-turbo-action",o);const a=t.getAttribute("data-turbo-confirm");a&&n.setAttribute("data-turbo-confirm",a),t.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(t,e,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",(()=>n.remove()),{once:!0}),requestAnimationFrame((()=>n.requestSubmit()))}}class U{static async preservingPermanentElements(t,e,n){const i=new this(t,e);i.enter(),await n(),i.leave()}constructor(t,e){this.delegate=t,this.permanentElementMap=e}enter(){for(const t in this.permanentElementMap){const[e,n]=this.permanentElementMap[t];this.delegate.enteringBardo(e,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(const t in this.permanentElementMap){const[e]=this.permanentElementMap[t];this.replaceCurrentPermanentElementWithClone(e),this.replacePlaceholderWithPermanentElement(e),this.delegate.leavingBardo(e)}}replaceNewPermanentElementWithPlaceholder(t){const e=function(t){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}(t);t.replaceWith(e)}replaceCurrentPermanentElementWithClone(t){const e=t.cloneNode(!0);t.replaceWith(e)}replacePlaceholderWithPermanentElement(t){const e=this.getPlaceholderById(t.id);null==e||e.replaceWith(t)}getPlaceholderById(t){return this.placeholders.find((e=>e.content==t))}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}class K{constructor(t,e,n,i,r=!0){this.activeElement=null,this.currentSnapshot=t,this.newSnapshot=e,this.isPreview=i,this.willRender=r,this.renderElement=n,this.promise=new Promise(((t,e)=>this.resolvingFunctions={resolve:t,reject:e}))}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(t){await U.preservingPermanentElements(this,this.permanentElementMap,t)}focusFirstAutofocusableElement(){const t=this.connectedSnapshot.firstAutofocusableElement;(function(t){return t&&"function"==typeof t.focus})(t)&&t.focus()}enteringBardo(t){this.activeElement||t.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(t){t.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}class G extends K{static renderElement(t,e){var n;const i=document.createRange();i.selectNodeContents(t),i.deleteContents();const r=e,s=null===(n=r.ownerDocument)||void 0===n?void 0:n.createRange();s&&(s.selectNodeContents(r),t.appendChild(s.extractContents()))}constructor(t,e,n,i,r,s=!0){super(e,n,i,r,s),this.delegate=t}get shouldRender(){return!0}async render(){await w(),this.preservingPermanentElements((()=>{this.loadFrameElement()})),this.scrollFrameIntoView(),await w(),this.focusFirstAutofocusableElement(),await w(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const e=this.currentElement.firstElementChild,n=("end","end"==(t=this.currentElement.getAttribute("data-autoscroll-block"))||"start"==t||"center"==t||"nearest"==t?t:"end"),i=function(t,e){return"auto"==t||"smooth"==t?t:"auto"}(this.currentElement.getAttribute("data-autoscroll-behavior"));if(e)return e.scrollIntoView({block:n,behavior:i}),!0}var t;return!1}activateScriptElements(){for(const t of this.newScriptElements){const e=b(t);t.replaceWith(e)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}class X{static get defaultCSS(){return E`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${X.animationDuration}ms ease-out,
          opacity ${X.animationDuration/2}ms ${X.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement((()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1})))}setValue(t){this.value=t,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*X.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,X.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame((()=>{this.progressElement.style.width=10+90*this.value+"%"}))}createStylesheetElement(){const t=document.createElement("style");return t.type="text/css",t.textContent=X.defaultCSS,this.cspNonce&&(t.nonce=this.cspNonce),t}createProgressElement(){const t=document.createElement("div");return t.className="turbo-progress-bar",t}get cspNonce(){return M("csp-nonce")}}X.animationDuration=300;class Y extends F{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter((t=>!function(t){return"noscript"==t.localName}(t))).map((t=>function(t){return t.hasAttribute("nonce")&&t.setAttribute("nonce",""),t}(t))).reduce(((t,e)=>{const{outerHTML:n}=e,i=n in t?t[n]:{type:Q(e),tracked:J(e),elements:[]};return Object.assign(Object.assign({},t),{[n]:Object.assign(Object.assign({},i),{elements:[...i.elements,e]})})}),{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter((t=>this.detailsByOuterHTML[t].tracked)).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,e){return Object.keys(this.detailsByOuterHTML).filter((t=>!(t in e.detailsByOuterHTML))).map((t=>this.detailsByOuterHTML[t])).filter((({type:e})=>e==t)).map((({elements:[t]})=>t))}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce(((t,e)=>{const{type:n,tracked:i,elements:r}=this.detailsByOuterHTML[e];return null!=n||i?r.length>1?[...t,...r.slice(1)]:t:[...t,...r]}),[])}getMetaValue(t){const e=this.findMetaElementByName(t);return e?e.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce(((e,n)=>{const{elements:[i]}=this.detailsByOuterHTML[n];return function(t,e){return"meta"==t.localName&&t.getAttribute("name")==e}(i,t)?i:e}),void 0)}}function Q(t){return function(t){return"script"==t.localName}(t)?"script":function(t){const e=t.localName;return"style"==e||"link"==e&&"stylesheet"==t.getAttribute("rel")}(t)?"stylesheet":void 0}function J(t){return"reload"==t.getAttribute("data-turbo-track")}class Z extends F{static fromHTMLString(t=""){return this.fromDocument(_(t))}static fromElement(t){return this.fromDocument(t.ownerDocument)}static fromDocument({head:t,body:e}){return new this(e,new Y(t))}constructor(t,e){super(t),this.headSnapshot=e}clone(){const t=this.element.cloneNode(!0),e=this.element.querySelectorAll("select"),n=t.querySelectorAll("select");for(const[t,i]of e.entries()){const e=n[t];for(const t of e.selectedOptions)t.selected=!1;for(const t of i.selectedOptions)e.options[t.index].selected=!0}for(const e of t.querySelectorAll('input[type="password"]'))e.value="";return new Z(t,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var t;return u(null!==(t=this.getSetting("root"))&&void 0!==t?t:"/")}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(t){return this.headSnapshot.getMetaValue(`turbo-${t}`)}}!function(t){t.visitStart="visitStart",t.requestStart="requestStart",t.requestEnd="requestEnd",t.visitEnd="visitEnd"}(l||(l={})),function(t){t.initialized="initialized",t.started="started",t.canceled="canceled",t.failed="failed",t.completed="completed"}(c||(c={}));const tt={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};var et,nt;!function(t){t[t.networkFailure=0]="networkFailure",t[t.timeoutFailure=-1]="timeoutFailure",t[t.contentTypeMismatch=-2]="contentTypeMismatch"}(et||(et={}));class it{constructor(t,e,n,i={}){this.identifier=S(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=c.initialized,this.delegate=t,this.location=e,this.restorationIdentifier=n||S();const{action:r,historyChanged:s,referrer:o,snapshot:a,snapshotHTML:l,response:h,visitCachedSnapshot:u,willRender:d,updateHistory:p,shouldCacheSnapshot:m,acceptsStreamResponse:f}=Object.assign(Object.assign({},tt),i);this.action=r,this.historyChanged=s,this.referrer=o,this.snapshot=a,this.snapshotHTML=l,this.response=h,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=u,this.willRender=d,this.updateHistory=p,this.scrolled=!d,this.shouldCacheSnapshot=m,this.acceptsStreamResponse=f}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==c.initialized&&(this.recordTimingMetric(l.visitStart),this.state=c.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==c.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=c.canceled)}complete(){this.state==c.started&&(this.recordTimingMetric(l.visitEnd),this.state=c.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==c.started&&(this.state=c.failed,this.adapter.visitFailed(this))}changeHistory(){var t;if(!this.historyChanged&&this.updateHistory){const e=O(this.location.href===(null===(t=this.referrer)||void 0===t?void 0:t.href)?"replace":this.action);this.history.update(e,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new R(this,s.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(l.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(t=this.response){if(this.response=t,t){const{statusCode:e}=t;rt(e)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,e)}}finishRequest(){this.recordTimingMetric(l.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:t,responseHTML:e}=this.response;this.render((async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,rt(t)&&null!=e?(await this.view.renderPage(Z.fromHTMLString(e),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(Z.fromHTMLString(e),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){const t=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(t&&(!d(this.location)||t.hasAnchor(d(this.location)))&&("restore"==this.action||t.isPreviewable))return t}getPreloadedSnapshot(){if(this.snapshotHTML)return Z.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){const t=this.getCachedSnapshot();if(t){const e=this.shouldIssueRequest();this.render((async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(t,e,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),e||this.complete())}))}}followRedirect(){var t;this.redirectedToLocation&&!this.followedRedirect&&(null===(t=this.response)||void 0===t?void 0:t.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render((async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(t){this.acceptsStreamResponse&&t.acceptResponseType(I.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(t,e){}async requestSucceededWithResponse(t,e){const n=await e.responseHTML,{redirected:i,statusCode:r}=e;null==n?this.recordResponse({statusCode:et.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=e.redirected?e.location:void 0,this.recordResponse({statusCode:r,responseHTML:n,redirected:i}))}async requestFailedWithResponse(t,e){const n=await e.responseHTML,{redirected:i,statusCode:r}=e;null==n?this.recordResponse({statusCode:et.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:r,responseHTML:n,redirected:i})}requestErrored(t,e){this.recordResponse({statusCode:et.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||this.view.forceReloaded||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:t}=this.restorationData;if(t)return this.view.scrollToPosition(t),!0}scrollToAnchor(){const t=d(this.location);if(null!=t)return this.view.scrollToAnchor(t),!0}recordTimingMetric(t){this.timingMetrics[t]=(new Date).getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then((t=>t&&this.visitCachedSnapshot(t))),this.snapshotCached=!0)}async render(t){this.cancelRender(),await new Promise((t=>{this.frame=requestAnimationFrame((()=>t()))})),await t(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function rt(t){return t>=200&&t<300}class st{constructor(t){this.progressBar=new X,this.showProgressBar=()=>{this.progressBar.show()},this.session=t}visitProposedToLocation(t,e){this.navigator.startVisit(t,(null==e?void 0:e.restorationIdentifier)||S(),e)}visitStarted(t){this.location=t.location,t.loadCachedSnapshot(),t.issueRequest(),t.goToSamePageAnchor()}visitRequestStarted(t){this.progressBar.setValue(0),t.hasCachedSnapshot()||"restore"!=t.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(t){t.loadResponse()}visitRequestFailedWithStatusCode(t,e){switch(e){case et.networkFailure:case et.timeoutFailure:case et.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:e}});default:return t.loadResponse()}}visitRequestFinished(t){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(t){}pageInvalidated(t){this.reload(t)}visitFailed(t){}visitRendered(t){}formSubmissionStarted(t){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(t){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(t){var e;y("turbo:reload",{detail:t}),window.location.href=(null===(e=this.location)||void 0===e?void 0:e.toString())||window.location.href}get navigator(){return this.session.navigator}}class ot{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=t=>{for(const t of this.temporaryElements)t.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const t=document.querySelectorAll(this.deprecatedSelector);return t.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...t]}}class at{constructor(t,e){this.session=t,this.element=e,this.linkInterceptor=new V(this,e),this.formSubmitObserver=new $(this,e)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(t,e,n){return this.shouldRedirect(t)}linkClickIntercepted(t,e,n){const i=this.findFrameElement(t);i&&i.delegate.linkClickIntercepted(t,e,n)}willSubmitForm(t,e){return null==t.closest("turbo-frame")&&this.shouldSubmit(t,e)&&this.shouldRedirect(t,e)}formSubmitted(t,e){const n=this.findFrameElement(t,e);n&&n.delegate.formSubmitted(t,e)}shouldSubmit(t,e){var n;const i=p(t,e),r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),s=u(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"/");return this.shouldRedirect(t,e)&&m(i,s)}shouldRedirect(t,e){if(t instanceof HTMLFormElement?this.session.submissionIsNavigatable(t,e):this.session.elementIsNavigatable(t)){const n=this.findFrameElement(t,e);return!!n&&n!=t.closest("turbo-frame")}return!1}findFrameElement(t,e){const n=(null==e?void 0:e.getAttribute("data-turbo-frame"))||t.getAttribute("data-turbo-frame");if(n&&"_top"!=n){const t=this.element.querySelector(`#${n}:not([disabled])`);if(t instanceof h)return t}}}class lt{constructor(t){this.restorationIdentifier=S(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){const{turbo:e}=t.state||{};if(e){this.location=new URL(window.location.href);const{restorationIdentifier:t}=e;this.restorationIdentifier=t,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,t)}}},this.onPageLoad=async t=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=t}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(t,e){this.update(history.pushState,t,e)}replace(t,e){this.update(history.replaceState,t,e)}update(t,e,n=S()){const i={turbo:{restorationIdentifier:n}};t.call(history,i,"",e.href),this.location=e,this.restorationIdentifier=n}getRestorationDataForIdentifier(t){return this.restorationData[t]||{}}updateRestorationData(t){const{restorationIdentifier:e}=this,n=this.restorationData[e];this.restorationData[e]=Object.assign(Object.assign({},n),t)}assumeControlOfScrollRestoration(){var t;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(t=history.scrollRestoration)&&void 0!==t?t:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}class ct{constructor(t){this.delegate=t}proposeVisit(t,e={}){this.delegate.allowsVisitingLocationWithAction(t,e.action)&&(m(t,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(t,e):window.location.href=t.toString())}startVisit(t,e,n={}){this.stop(),this.currentVisit=new it(this,u(t),e,Object.assign({referrer:this.location},n)),this.currentVisit.start()}submitForm(t,e){this.stop(),this.formSubmission=new N(this,t,e,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(t){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(t)}async formSubmissionSucceededWithResponse(t,e){if(t==this.formSubmission){const n=await e.responseHTML;if(n){const i=t.isSafe;i||this.view.clearSnapshotCache();const{statusCode:r,redirected:s}=e,o={action:this.getActionForFormSubmission(t),shouldCacheSnapshot:i,response:{statusCode:r,responseHTML:n,redirected:s}};this.proposeVisit(e.location,o)}}}async formSubmissionFailedWithResponse(t,e){const n=await e.responseHTML;if(n){const t=Z.fromHTMLString(n);e.serverError?await this.view.renderError(t,this.currentVisit):await this.view.renderPage(t,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished(t){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(t)}visitStarted(t){this.delegate.visitStarted(t)}visitCompleted(t){this.delegate.visitCompleted(t)}locationWithActionIsSamePage(t,e){const n=d(t),i=d(this.view.lastRenderedLocation),r="restore"===e&&void 0===n;return"replace"!==e&&f(t)===f(this.view.lastRenderedLocation)&&(r||null!=n&&n!==i)}visitScrolledToSamePageLocation(t,e){this.delegate.visitScrolledToSamePageLocation(t,e)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:t,formElement:e}){return x(t,e)||"advance"}}!function(t){t[t.initial=0]="initial",t[t.loading=1]="loading",t[t.interactive=2]="interactive",t[t.complete=3]="complete"}(nt||(nt={}));class ht{constructor(t){this.stage=nt.initial,this.started=!1,this.interpretReadyState=()=>{const{readyState:t}=this;"interactive"==t?this.pageIsInteractive():"complete"==t&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=t}start(){this.started||(this.stage==nt.initial&&(this.stage=nt.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==nt.loading&&(this.stage=nt.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==nt.interactive&&(this.stage=nt.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class ut{constructor(t){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=t}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(t){this.delegate.scrollPositionChanged(t)}}class dt{render({fragment:t}){U.preservingPermanentElements(this,function(t){const e=B(document.documentElement),n={};for(const i of e){const{id:e}=i;for(const r of t.querySelectorAll("turbo-stream")){const t=j(r.templateElement.content,e);t&&(n[e]=[i,t])}}return n}(t),(()=>document.documentElement.appendChild(t)))}enteringBardo(t,e){e.replaceWith(t.cloneNode(!0))}leavingBardo(){}}class pt{constructor(t){this.sources=new Set,this.started=!1,this.inspectFetchResponse=t=>{const e=function(t){var e;const n=null===(e=t.detail)||void 0===e?void 0:e.fetchResponse;if(n instanceof v)return n}(t);e&&function(t){var e;return(null!==(e=t.contentType)&&void 0!==e?e:"").startsWith(I.contentType)}(e)&&(t.preventDefault(),this.receiveMessageResponse(e))},this.receiveMessageEvent=t=>{this.started&&"string"==typeof t.data&&this.receiveMessageHTML(t.data)},this.delegate=t}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(t){this.streamSourceIsConnected(t)||(this.sources.add(t),t.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(t){this.streamSourceIsConnected(t)&&(this.sources.delete(t),t.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(t){return this.sources.has(t)}async receiveMessageResponse(t){const e=await t.responseHTML;e&&this.receiveMessageHTML(e)}receiveMessageHTML(t){this.delegate.receivedMessageFromStream(I.wrap(t))}}class mt extends K{static renderElement(t,e){const{documentElement:n,body:i}=document;n.replaceChild(e,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:t,head:e}=document;t.replaceChild(this.newHead,e),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const t of this.scriptElements){const e=t.parentNode;if(e){const n=b(t);e.replaceChild(n,t)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class ft extends K{static renderElement(t,e){document.body&&e instanceof HTMLBodyElement?document.body.replaceWith(e):document.documentElement.appendChild(e)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){return this.newSnapshot.isVisitable?this.trackedElementsAreIdentical?void 0:{reason:"tracked_element_mismatch"}:{reason:"turbo_visit_control_is_reload"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),e=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await e}async replaceBody(){await this.preservingPermanentElements((async()=>{this.activateNewBody(),await this.assignNewBody()}))}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const e of this.newHeadStylesheetElements)t.push(k(e)),document.head.appendChild(e);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild(b(t))}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const e of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(e,t)||document.head.removeChild(e);for(const e of t)document.head.appendChild(e)}isCurrentElementInElementList(t,e){for(const[n,i]of e.entries()){if("TITLE"==t.tagName){if("TITLE"!=i.tagName)continue;if(t.innerHTML==i.innerHTML)return e.splice(n,1),!0}if(i.isEqualNode(t))return e.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const e=b(t);t.replaceWith(e)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}class gt{constructor(t){this.keys=[],this.snapshots={},this.size=t}has(t){return g(t)in this.snapshots}get(t){if(this.has(t)){const e=this.read(t);return this.touch(t),e}}put(t,e){return this.write(t,e),this.touch(t),e}clear(){this.snapshots={}}read(t){return this.snapshots[g(t)]}write(t,e){this.snapshots[g(t)]=e}touch(t){const e=g(t),n=this.keys.indexOf(e);n>-1&&this.keys.splice(n,1),this.keys.unshift(e),this.trim()}trim(){for(const t of this.keys.splice(this.size))delete this.snapshots[t]}}class vt extends q{constructor(){super(...arguments),this.snapshotCache=new gt(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(t,e=!1,n=!0,i){const r=new ft(this.snapshot,t,ft.renderElement,e,n);return r.shouldRender?null==i||i.changeHistory():this.forceReloaded=!0,this.render(r)}renderError(t,e){null==e||e.changeHistory();const n=new mt(this.snapshot,t,mt.renderElement,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:e}=this;await new Promise((t=>setTimeout((()=>t()),0)));const n=t.clone();return this.snapshotCache.put(e,n),n}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}get snapshot(){return Z.fromElement(this.element)}}class bt{constructor(t){this.selector="a[data-turbo-preload]",this.delegate=t}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",(()=>{this.preloadOnLoadLinksForView(document.body)}));this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(t){for(const e of t.querySelectorAll(this.selector))this.preloadURL(e)}async preloadURL(t){const e=new URL(t.href);if(!this.snapshotCache.has(e))try{const t=await fetch(e.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}}),n=await t.text(),i=Z.fromHTMLString(n);this.snapshotCache.put(e,i)}catch(t){}}}function yt(t){Object.defineProperties(t,wt)}const wt={absoluteURL:{get(){return this.toString()}}},_t={after(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t.nextSibling)}))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.append(this.templateContent)))},before(){this.targetElements.forEach((t=>{var e;return null===(e=t.parentElement)||void 0===e?void 0:e.insertBefore(this.templateContent,t)}))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach((t=>t.prepend(this.templateContent)))},remove(){this.targetElements.forEach((t=>t.remove()))},replace(){this.targetElements.forEach((t=>t.replaceWith(this.templateContent)))},update(){this.targetElements.forEach((t=>{t.innerHTML="",t.append(this.templateContent)}))}},Et=new class{constructor(){this.navigator=new ct(this),this.history=new lt(this),this.preloader=new bt(this),this.view=new vt(this,document.documentElement),this.adapter=new st(this),this.pageObserver=new ht(this),this.cacheObserver=new ot,this.linkClickObserver=new W(this,window),this.formSubmitObserver=new $(this,document),this.scrollObserver=new ut(this),this.streamObserver=new pt(this),this.formLinkClickObserver=new z(this,document.documentElement),this.frameRedirector=new at(this,document.documentElement),this.streamMessageRenderer=new dt,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(t){this.adapter=t}visit(t,e={}){const n=e.frame?document.getElementById(e.frame):null;n instanceof h?(n.src=t.toString(),n.loaded):this.navigator.proposeVisit(u(t),e)}connectStreamSource(t){this.streamObserver.connectStreamSource(t)}disconnectStreamSource(t){this.streamObserver.disconnectStreamSource(t)}renderStreamMessage(t){this.streamMessageRenderer.render(I.wrap(t))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(t){this.progressBarDelay=t}setFormMode(t){this.formMode=t}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(t,e){this.enabled?this.navigator.startVisit(t,e,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(t){this.history.updateRestorationData({scrollPosition:t})}willSubmitFormLinkToLocation(t,e){return this.elementIsNavigatable(t)&&m(e,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(t,e,n){return this.elementIsNavigatable(t)&&m(e,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(t,e,n)}followedLinkToLocation(t,e){const n=this.getActionForLink(t),i=t.hasAttribute("data-turbo-stream");this.visit(e.href,{action:n,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(t,e){return this.locationWithActionIsSamePage(t,e)||this.applicationAllowsVisitingLocation(t)}visitProposedToLocation(t,e){yt(t),this.adapter.visitProposedToLocation(t,e)}visitStarted(t){t.acceptsStreamResponse||C(document.documentElement),yt(t.location),t.silent||this.notifyApplicationAfterVisitingLocation(t.location,t.action)}visitCompleted(t){T(document.documentElement),this.notifyApplicationAfterPageLoad(t.getTimingMetrics())}locationWithActionIsSamePage(t,e){return this.navigator.locationWithActionIsSamePage(t,e)}visitScrolledToSamePageLocation(t,e){this.notifyApplicationAfterVisitingSamePageLocation(t,e)}willSubmitForm(t,e){const n=p(t,e);return this.submissionIsNavigatable(t,e)&&m(u(n),this.snapshot.rootLocation)}formSubmitted(t,e){this.navigator.submitForm(t,e)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(t){this.renderStreamMessage(t)}viewWillCacheSnapshot(){var t;(null===(t=this.navigator.currentVisit)||void 0===t?void 0:t.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:t},e){const n=this.notifyApplicationBeforeRender(t,e),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(t,e){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(t){this.preloader.preloadOnLoadLinksForView(t)}viewInvalidated(t){this.adapter.pageInvalidated(t)}frameLoaded(t){this.notifyApplicationAfterFrameLoad(t)}frameRendered(t,e){this.notifyApplicationAfterFrameRender(t,e)}applicationAllowsFollowingLinkToLocation(t,e,n){return!this.notifyApplicationAfterClickingLinkToLocation(t,e,n).defaultPrevented}applicationAllowsVisitingLocation(t){return!this.notifyApplicationBeforeVisitingLocation(t).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(t,e,n){return y("turbo:click",{target:t,detail:{url:e.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(t){return y("turbo:before-visit",{detail:{url:t.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(t,e){return y("turbo:visit",{detail:{url:t.href,action:e}})}notifyApplicationBeforeCachingSnapshot(){return y("turbo:before-cache")}notifyApplicationBeforeRender(t,e){return y("turbo:before-render",{detail:Object.assign({newBody:t},e),cancelable:!0})}notifyApplicationAfterRender(){return y("turbo:render")}notifyApplicationAfterPageLoad(t={}){return y("turbo:load",{detail:{url:this.location.href,timing:t}})}notifyApplicationAfterVisitingSamePageLocation(t,e){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:t.toString(),newURL:e.toString()}))}notifyApplicationAfterFrameLoad(t){return y("turbo:frame-load",{target:t})}notifyApplicationAfterFrameRender(t,e){return y("turbo:frame-render",{detail:{fetchResponse:t},target:e,cancelable:!0})}submissionIsNavigatable(t,e){if("off"==this.formMode)return!1;{const n=!e||this.elementIsNavigatable(e);return"optin"==this.formMode?n&&null!=t.closest('[data-turbo="true"]'):n&&this.elementIsNavigatable(t)}}elementIsNavigatable(t){const e=P(t,"[data-turbo]"),n=P(t,"turbo-frame");return this.drive||n?!e||"false"!=e.getAttribute("data-turbo"):!!e&&"true"==e.getAttribute("data-turbo")}getActionForLink(t){return x(t)||"advance"}get snapshot(){return this.view.snapshot}},St=new class{constructor(t){this.session=t}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(t){!function(t,e){let n=L(t);n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.setAttribute("content",e)}("turbo-cache-control",t)}}(Et),{navigator:At}=Et;function Ct(){Et.start()}function Tt(t){Et.connectStreamSource(t)}function kt(t){Et.disconnectStreamSource(t)}var Ot=Object.freeze({__proto__:null,navigator:At,session:Et,cache:St,PageRenderer:ft,PageSnapshot:Z,FrameRenderer:G,start:Ct,registerAdapter:function(t){Et.registerAdapter(t)},visit:function(t,e){Et.visit(t,e)},connectStreamSource:Tt,disconnectStreamSource:kt,renderStreamMessage:function(t){Et.renderStreamMessage(t)},clearCache:function(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Et.clearCache()},setProgressBarDelay:function(t){Et.setProgressBarDelay(t)},setConfirmMethod:function(t){N.confirmMethod=t},setFormMode:function(t){Et.setFormMode(t)},StreamActions:_t});class xt extends Error{}function Lt(t){if(null!=t){const e=document.getElementById(t);if(e instanceof h)return e}}function Mt(t,e){if(t){const n=t.getAttribute("src");if(null!=n&&null!=e&&function(t,e){return u(t).href==u(e).href}(n,e))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof h)return t.connectedCallback(),t.disconnectedCallback(),t}}class Pt extends HTMLElement{static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){var t;return null!==(t=this.renderPromise)&&void 0!==t?t:this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await w(),await t.detail.render(this))})()}disconnect(){try{this.remove()}catch(t){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach((t=>t.remove()))}get duplicateChildren(){var t;const e=this.targetElements.flatMap((t=>[...t.children])).filter((t=>!!t.id)),n=[...(null===(t=this.templateContent)||void 0===t?void 0:t.children)||[]].filter((t=>!!t.id)).map((t=>t.id));return e.filter((t=>n.includes(t.id)))}get performAction(){if(this.action){const t=_t[this.action];if(t)return t;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(null===this.firstElementChild){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(t){throw new Error(`${this.description}: ${t}`)}get description(){var t,e;return null!==(e=(null!==(t=this.outerHTML.match(/<[^>]+>/))&&void 0!==t?t:[])[0])&&void 0!==e?e:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:Pt.renderElement}})}get targetElementsById(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.getElementById(this.target);return null!==e?[e]:[]}get targetElementsByQuery(){var t;const e=null===(t=this.ownerDocument)||void 0===t?void 0:t.querySelectorAll(this.targets);return 0!==e.length?Array.prototype.slice.call(e):[]}}class Rt extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Tt(this.streamSource)}disconnectedCallback(){this.streamSource&&kt(this.streamSource)}get src(){return this.getAttribute("src")||""}}let Dt;function It(t){return Dt=t}function Nt(t){return t&&"object"==typeof t?t instanceof Date||t instanceof RegExp?t:Array.isArray(t)?t.map(Nt):Object.keys(t).reduce((function(e,n){return e[n[0].toLowerCase()+n.slice(1).replace(/([A-Z]+)/g,(function(t,e){return"_"+e.toLowerCase()}))]=Nt(t[n]),e}),{}):t}h.delegateConstructor=class{constructor(t){this.fetchResponseLoaded=t=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:t})=>{const e=t.querySelector("#"+this.element.id);e&&this.previousFrameElement&&e.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=t,this.view=new H(this,this.element),this.appearanceObserver=new D(this,this.element),this.formLinkClickObserver=new z(this,this.element),this.linkInterceptor=new V(this,this.element),this.restorationIdentifier=S(),this.formSubmitObserver=new $(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==r.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==r.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==r.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){const{src:t}=this.element;return this.ignoringChangesToAttribute("complete",(()=>{this.element.removeAttribute("complete")})),this.element.src=null,this.element.src=t,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==r.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(u(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(t){(t.redirected||t.succeeded&&t.isHTML)&&(this.sourceURL=t.response.url);try{const e=await t.responseHTML;if(e){const n=_(e);Z.fromDocument(n).isVisitable?await this.loadFrameResponse(t,n):await this.handleUnvisitableFrameResponse(t)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(t){this.proposeVisitIfNavigatedWithAction(t,t),this.loadSourceURL()}willSubmitFormLinkToLocation(t){return this.shouldInterceptNavigation(t)}submittedFormLinkToLocation(t,e,n){const i=this.findFrameElement(t);i&&n.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(t,e,n){return this.shouldInterceptNavigation(t)}linkClickIntercepted(t,e){this.navigateFrame(t,e)}willSubmitForm(t,e){return t.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(t,e)}formSubmitted(t,e){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new N(this,t,e);const{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(t){var e;t.headers["Turbo-Frame"]=this.id,(null===(e=this.currentNavigationElement)||void 0===e?void 0:e.hasAttribute("data-turbo-stream"))&&t.acceptResponseType(I.contentType)}requestStarted(t){C(this.element)}requestPreventedHandlingResponse(t,e){this.resolveVisitPromise()}async requestSucceededWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}async requestFailedWithResponse(t,e){await this.loadResponse(e),this.resolveVisitPromise()}requestErrored(t,e){console.error(e),this.resolveVisitPromise()}requestFinished(t){T(this.element)}formSubmissionStarted({formElement:t}){C(t,this.findFrameElement(t))}formSubmissionSucceededWithResponse(t,e){const n=this.findFrameElement(t.formElement,t.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,t.formElement,t.submitter),n.delegate.loadResponse(e),t.isSafe||Et.clearCache()}formSubmissionFailedWithResponse(t,e){this.element.delegate.loadResponse(e),Et.clearCache()}formSubmissionErrored(t,e){console.error(e)}formSubmissionFinished({formElement:t}){T(t,this.findFrameElement(t))}allowsImmediateRender({element:t},e){const n=y("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:t},e),cancelable:!0}),{defaultPrevented:i,detail:{render:r}}=n;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!i}viewRenderedSnapshot(t,e){}preloadOnLoadLinksForView(t){Et.preloadOnLoadLinksForView(t)}viewInvalidated(){}willRenderFrame(t,e){this.previousFrameElement=t.cloneNode(!0)}async loadFrameResponse(t,e){const n=await this.extractForeignFrameElement(e.body);if(n){const e=new F(n),i=new G(this,this.view.snapshot,e,G.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(i),this.complete=!0,Et.frameRendered(t,this.element),Et.frameLoaded(this.element),this.fetchResponseLoaded(t)}else this.willHandleFrameMissingFromResponse(t)&&this.handleFrameMissingFromResponse(t)}async visit(t){var e;const n=new R(this,s.get,t,new URLSearchParams,this.element);return null===(e=this.currentFetchRequest)||void 0===e||e.cancel(),this.currentFetchRequest=n,new Promise((t=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,t()},n.perform()}))}navigateFrame(t,e,n){const i=this.findFrameElement(t,n);i.delegate.proposeVisitIfNavigatedWithAction(i,t,n),this.withCurrentNavigationElement(t,(()=>{i.src=e}))}proposeVisitIfNavigatedWithAction(t,e,n){if(this.action=x(n,e,t),this.action){const e=Z.fromElement(t).clone(),{visitCachedSnapshot:n}=t.delegate;t.delegate.fetchResponseLoaded=i=>{if(t.src){const{statusCode:r,redirected:s}=i,o={response:{statusCode:r,redirected:s,responseHTML:t.ownerDocument.documentElement.outerHTML},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:e};this.action&&(o.action=this.action),Et.visit(t.src,o)}}}}changeHistory(){if(this.action){const t=O(this.action);Et.history.update(t,u(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(t){console.warn(`The response (${t.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(t.response)}willHandleFrameMissingFromResponse(t){this.element.setAttribute("complete","");const e=t.response;return!y("turbo:frame-missing",{target:this.element,detail:{response:e,visit:async(t,e={})=>{t instanceof Response?this.visitResponse(t):Et.visit(t,e)}},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(t){this.view.missing(),this.throwFrameMissingError(t)}throwFrameMissingError(t){const e=`The response (${t.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new xt(e)}async visitResponse(t){const e=new v(t),n=await e.responseHTML,{location:i,redirected:r,statusCode:s}=e;return Et.visit(i,{response:{redirected:r,statusCode:s,responseHTML:n}})}findFrameElement(t,e){var n;return null!==(n=Lt(A("data-turbo-frame",e,t)||this.element.getAttribute("target")))&&void 0!==n?n:this.element}async extractForeignFrameElement(t){let e;const n=CSS.escape(this.id);try{if(e=Mt(t.querySelector(`turbo-frame#${n}`),this.sourceURL),e)return e;if(e=Mt(t.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),e)return await e.loaded,await this.extractForeignFrameElement(e)}catch(t){return console.error(t),new h}return null}formActionIsVisitable(t,e){return m(u(p(t,e)),this.rootLocation)}shouldInterceptNavigation(t,e){const n=A("data-turbo-frame",e,t)||this.element.getAttribute("target");if(t instanceof HTMLFormElement&&!this.formActionIsVisitable(t,e))return!1;if(!this.enabled||"_top"==n)return!1;if(n){const t=Lt(n);if(t)return!t.disabled}return!(!Et.elementIsNavigatable(t)||e&&!Et.elementIsNavigatable(e))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(t){this.ignoringChangesToAttribute("src",(()=>{this.element.src=null!=t?t:null}))}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission||void 0!==this.resolveVisitPromise()}get complete(){return this.element.hasAttribute("complete")}set complete(t){this.ignoringChangesToAttribute("complete",(()=>{t?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}))}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var t;const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]');return u(null!==(t=null==e?void 0:e.content)&&void 0!==t?t:"/")}isIgnoringChangesTo(t){return this.ignoredAttributes.has(t)}ignoringChangesToAttribute(t,e){this.ignoredAttributes.add(t),e(),this.ignoredAttributes.delete(t)}withCurrentNavigationElement(t,e){this.currentNavigationElement=t,e(),delete this.currentNavigationElement}},void 0===customElements.get("turbo-frame")&&customElements.define("turbo-frame",h),void 0===customElements.get("turbo-stream")&&customElements.define("turbo-stream",Pt),void 0===customElements.get("turbo-stream-source")&&customElements.define("turbo-stream-source",Rt),(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(E`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})(),window.Turbo=Ot,Ct();class Ft extends HTMLElement{async connectedCallback(){Tt(this),this.subscription=await async function(t,e){const{subscriptions:i}=await async function(){return Dt||It(async function(){const{createConsumer:t}=await Promise.resolve().then(n.bind(n,245));return t()}().then(It))}();return i.create(t,e)}(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){kt(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(t){const e=new MessageEvent("message",{data:t});return this.dispatchEvent(e)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){return{channel:this.getAttribute("channel"),signed_stream_name:this.getAttribute("signed-stream-name"),...Nt({...this.dataset})}}}void 0===customElements.get("turbo-cable-stream-source")&&customElements.define("turbo-cable-stream-source",Ft),addEventListener("turbo:before-fetch-request",(function(t){if(t.target instanceof HTMLFormElement){const{target:e,detail:{fetchOptions:n}}=t;e.addEventListener("turbo:submit-start",(({detail:{formSubmission:{submitter:t}}})=>{const i=function(t){return t instanceof FormData||t instanceof URLSearchParams}(n.body)?n.body:new URLSearchParams,r=function(t,e,n){const i=function(t){return(t instanceof HTMLButtonElement||t instanceof HTMLInputElement)&&t.hasAttribute("formmethod")?t.formMethod:null}(t),r=e.get("_method"),s=n.getAttribute("method")||"get";return"string"==typeof i?i:"string"==typeof r?r:s}(t,i,e);/get/i.test(r)||(/post/i.test(r)?i.delete("_method"):i.set("_method",r),n.method="post")}),{once:!0})}}));class jt{constructor(t,e,n){this.eventTarget=t,this.eventName=e,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=function(t){if("immediatePropagationStopped"in t)return t;{const{stopImmediatePropagation:e}=t;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}(t);for(const t of this.bindings){if(e.immediatePropagationStopped)break;t.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort(((t,e)=>{const n=t.index,i=e.index;return n<i?-1:n>i?1:0}))}}class Bt{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((t=>t.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((t=>t.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((t,e)=>t.concat(Array.from(e.values()))),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,n={}){this.application.handleError(t,`Error ${e}`,n)}clearEventListenersForBinding(t){const e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:e,eventName:n,eventOptions:i}=t,r=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(n,i);r.delete(s),0==r.size&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:n,eventOptions:i}=t;return this.fetchEventListener(e,n,i)}fetchEventListener(t,e,n){const i=this.fetchEventListenerMapForEventTarget(t),r=this.cacheKey(e,n);let s=i.get(r);return s||(s=this.createEventListener(t,e,n),i.set(r,s)),s}createEventListener(t,e,n){const i=new jt(t,e,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const n=[t];return Object.keys(e).sort().forEach((t=>{n.push(`${e[t]?"":"!"}${t}`)})),n.join(":")}}const $t={stop:({event:t,value:e})=>(e&&t.stopPropagation(),!0),prevent:({event:t,value:e})=>(e&&t.preventDefault(),!0),self:({event:t,value:e,element:n})=>!e||n===t.target},qt=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ht(t){return t.replace(/(?:[_-])([a-z0-9])/g,((t,e)=>e.toUpperCase()))}function Vt(t){return Ht(t.replace(/--/g,"-").replace(/__/g,"_"))}function Wt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function zt(t){return t.replace(/([A-Z])/g,((t,e)=>`-${e.toLowerCase()}`))}class Ut{constructor(t,e,n,i){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||function(t){const e=t.tagName.toLowerCase();if(e in Kt)return Kt[e](t)}(t)||Gt("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Gt("missing identifier"),this.methodName=n.methodName||Gt("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(t,e){return new this(t.element,t.index,function(t){const e=t.trim().match(qt)||[];let n=e[1],i=e[2];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:(r=e[3],"window"==r?window:"document"==r?document:void 0),eventName:n,eventOptions:e[6]?(s=e[6],s.split(":").reduce(((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)})),{})):{},identifier:e[4],methodName:e[5],keyFilter:i};var r,s}(t.content),e)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}isFilterTarget(t){if(!this.keyFilter)return!1;const e=this.keyFilter.split("+"),n=["meta","ctrl","alt","shift"],[i,r,s,o]=n.map((t=>e.includes(t)));if(t.metaKey!==i||t.ctrlKey!==r||t.altKey!==s||t.shiftKey!==o)return!0;const a=e.filter((t=>!n.includes(t)))[0];return!!a&&(Object.prototype.hasOwnProperty.call(this.keyMappings,a)||Gt(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[a].toLowerCase()!==t.key.toLowerCase())}get params(){const t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:i}of Array.from(this.element.attributes)){const r=n.match(e),s=r&&r[1];s&&(t[Ht(s)]=Xt(i))}return t}get eventTargetName(){return(t=this.eventTarget)==window?"window":t==document?"document":void 0;var t}get keyMappings(){return this.schema.keyMappings}}const Kt={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:t=>"submit"==t.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};function Gt(t){throw new Error(t)}function Xt(t){try{return JSON.parse(t)}catch(e){return t}}class Yt{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){this.willBeInvokedByEvent(t)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if("function"==typeof t)return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:e}=this.action,{actionDescriptorFilters:n}=this.context.application;let i=!0;for(const[r,s]of Object.entries(this.eventOptions))if(r in n){const o=n[r];i=i&&o({name:r,value:s,event:t,element:e})}return i}invokeWithEvent(t){const{target:e,currentTarget:n}=t;try{const{params:i}=this.action,r=Object.assign(t,{params:i});this.method.call(this.controller,r),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:n,action:this.methodName})}catch(e){const{identifier:n,controller:i,element:r,index:s}=this,o={identifier:n,controller:i,element:r,index:s,event:t};this.context.handleError(e,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(t){const e=t.target;return!(t instanceof KeyboardEvent&&this.action.isFilterTarget(t))&&(this.element===e||(e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element)))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Qt{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){"attributes"==t.type?this.processAttributeChange(t.target,t.attributeName):"childList"==t.type&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){const n=t;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,e):this.removeElement(n):this.matchElement(n)&&this.addElement(n)}processRemovedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.processTree(t,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.elementIsActive(t)&&this.processTree(t,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const n of this.matchElementsInTree(t))e.call(this,n)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected==this.element.isConnected&&this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class Jt{constructor(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new Qt(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}function Zt(t,e){let n=t.get(e);return n||(n=new Set,t.set(e,n)),n}class te{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t.concat(Array.from(e))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t+e.size),0)}add(t,e){!function(t,e,n){Zt(t,e).add(n)}(this.valuesByKey,t,e)}delete(t,e){!function(t,e,n){Zt(t,e).delete(n),function(t,e){const n=t.get(e);null!=n&&0==n.size&&t.delete(e)}(t,e)}(this.valuesByKey,t,e)}has(t,e){const n=this.valuesByKey.get(t);return null!=n&&n.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some((e=>e.has(t)))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter((([e,n])=>n.has(t))).map((([t,e])=>t))}}class ee{constructor(t,e,n,i={}){this.selector=e,this.details=i,this.elementObserver=new Qt(t,this),this.delegate=n,this.matchesByElement=new te}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const e=t.matches(this.selector);return this.delegate.selectorMatchElement?e&&this.delegate.selectorMatchElement(t,this.details):e}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector)).filter((t=>this.matchElement(t)));return e.concat(n)}elementMatched(t){this.selectorMatched(t)}elementUnmatched(t){this.selectorUnmatched(t)}elementAttributeChanged(t,e){const n=this.matchElement(t),i=this.matchesByElement.has(this.selector,t);!n&&i&&this.selectorUnmatched(t)}selectorMatched(t){this.delegate.selectorMatched&&(this.delegate.selectorMatched(t,this.selector,this.details),this.matchesByElement.add(this.selector,t))}selectorUnmatched(t){this.delegate.selectorUnmatched(t,this.selector,this.details),this.matchesByElement.delete(this.selector,t)}}class ne{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const n=this.delegate.getStringMapKeyForAttribute(t);if(null!=n){this.stringMap.has(t)||this.stringMapKeyAdded(n,t);const i=this.element.getAttribute(t);if(this.stringMap.get(t)!=i&&this.stringMapValueChanged(i,n,e),null==i){const e=this.stringMap.get(t);this.stringMap.delete(t),e&&this.stringMapKeyRemoved(n,t,e)}else this.stringMap.set(t,i)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,n)}stringMapKeyRemoved(t,e,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((t=>t.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class ie{constructor(t,e,n){this.attributeObserver=new Jt(t,e,this),this.delegate=n,this.tokensByElement=new te}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,n]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(n)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach((t=>this.tokenMatched(t)))}tokensUnmatched(t){t.forEach((t=>this.tokenUnmatched(t)))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),n=this.readTokensForElement(t),i=function(t,e){const n=Math.max(t.length,e.length);return Array.from({length:n},((n,i)=>[t[i],e[i]]))}(e,n).findIndex((([t,e])=>!function(t,e){return t&&e&&t.index==e.index&&t.content==e.content}(t,e)));return-1==i?[[],[]]:[e.slice(i),n.slice(i)]}readTokensForElement(t){const e=this.attributeName;return function(t,e,n){return t.trim().split(/\s+/).filter((t=>t.length)).map(((t,i)=>({element:e,attributeName:n,content:t,index:i})))}(t.getAttribute(e)||"",t,e)}}class re{constructor(t,e,n){this.tokenListObserver=new ie(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))}tokenUnmatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(t){return{error:t}}}}class se{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new re(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new Yt(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach((t=>this.delegate.bindingDisconnected(t,!0))),this.bindingsByAction.clear()}parseValueForToken(t){const e=Ut.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class oe{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new ne(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const n=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,n.writer(this.receiver[t]),n.writer(n.defaultValue))}stringMapValueChanged(t,e,n){const i=this.valueDescriptorNameMap[e];null!==t&&(null===n&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(e,t,n))}stringMapKeyRemoved(t,e,n){const i=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,i.writer(this.receiver[t]),n):this.invokeChangedCallback(t,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:n,writer:i}of this.valueDescriptors)null==n||this.controller.data.has(t)||this.invokeChangedCallback(e,i(n),void 0)}invokeChangedCallback(t,e,n){const i=`${t}Changed`,r=this.receiver[i];if("function"==typeof r){const i=this.valueDescriptorNameMap[t];try{const t=i.reader(e);let s=n;n&&(s=i.reader(n)),r.call(this.receiver,t,s)}catch(t){throw t instanceof TypeError&&(t.message=`Stimulus Value "${this.context.identifier}.${i.name}" - ${t.message}`),t}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map((e=>t[e]))}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach((e=>{const n=this.valueDescriptorMap[e];t[n.name]=n})),t}hasValue(t){const e=`has${Wt(this.valueDescriptorNameMap[t].name)}`;return this.receiver[e]}}class ae{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new te}start(){this.tokenListObserver||(this.tokenListObserver=new ie(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var n;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(t,e))))}disconnectTarget(t,e){var n;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(t,e))))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function le(t,e){const n=ce(t);return Array.from(n.reduce(((t,n)=>(function(t,e){const n=t[e];return Array.isArray(n)?n:[]}(n,e).forEach((e=>t.add(e))),t)),new Set))}function ce(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}class he{constructor(t,e){this.context=t,this.delegate=e,this.outletsByName=new te,this.outletElementsByName=new te,this.selectorObserverMap=new Map}start(){0===this.selectorObserverMap.size&&(this.outletDefinitions.forEach((t=>{const e=this.selector(t),n={outletName:t};e&&this.selectorObserverMap.set(t,new ee(document.body,e,this,n))})),this.selectorObserverMap.forEach((t=>t.start()))),this.dependentContexts.forEach((t=>t.refresh()))}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach((t=>t.stop())),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach((t=>t.refresh()))}selectorMatched(t,e,{outletName:n}){const i=this.getOutlet(t,n);i&&this.connectOutlet(i,t,n)}selectorUnmatched(t,e,{outletName:n}){const i=this.getOutletFromMap(t,n);i&&this.disconnectOutlet(i,t,n)}selectorMatchElement(t,{outletName:e}){return this.hasOutlet(t,e)&&t.matches(`[${this.context.application.schema.controllerAttribute}~=${e}]`)}connectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)||(this.outletsByName.add(n,t),this.outletElementsByName.add(n,e),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletConnected(t,e,n))))}disconnectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)&&(this.outletsByName.delete(n,t),this.outletElementsByName.delete(n,e),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletDisconnected(t,e,n))))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const e of this.outletElementsByName.getValuesForKey(t))for(const n of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(n,e,t)}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}get outletDependencies(){const t=new te;return this.router.modules.forEach((e=>{le(e.definition.controllerConstructor,"outlets").forEach((n=>t.add(n,e.identifier)))})),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter((e=>t.includes(e.identifier)))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find((e=>e.element===t))}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class ue{constructor(t,e){this.logDebugActivity=(t,e={})=>{const{identifier:n,controller:i,element:r}=this;e=Object.assign({identifier:n,controller:i,element:r},e),this.application.logDebugActivity(this.identifier,t,e)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new se(this,this.dispatcher),this.valueObserver=new oe(this,this.controller),this.targetObserver=new ae(this,this),this.outletObserver=new he(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(t){this.handleError(t,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,n={}){const{identifier:i,controller:r,element:s}=this;n=Object.assign({identifier:i,controller:r,element:s},n),this.application.handleError(t,`Error ${e}`,n)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,n){this.invokeControllerMethod(`${Vt(n)}OutletConnected`,t,e)}outletDisconnected(t,e,n){this.invokeControllerMethod(`${Vt(n)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){const n=this.controller;"function"==typeof n[t]&&n[t](...e)}}const de="function"==typeof Object.getOwnPropertySymbols?t=>[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]:Object.getOwnPropertyNames,pe=(()=>{function t(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}try{return function(){const e=t((function(){this.a.call(this)}));e.prototype.a=function(){},new e}(),t}catch(t){return t=>class extends t{}}})();class me{constructor(t,e){this.application=t,this.definition=function(t){return{identifier:t.identifier,controllerConstructor:(e=t.controllerConstructor,function(t,e){const n=pe(t),i=function(t,e){return de(e).reduce(((n,i)=>{const r=function(t,e,n){const i=Object.getOwnPropertyDescriptor(t,n);if(!i||!("value"in i)){const t=Object.getOwnPropertyDescriptor(e,n).value;return i&&(t.get=i.get||t.get,t.set=i.set||t.set),t}}(t,e,i);return r&&Object.assign(n,{[i]:r}),n}),{})}(t.prototype,e);return Object.defineProperties(n.prototype,i),n}(e,function(t){return le(t,"blessings").reduce(((e,n)=>{const i=n(t);for(const t in i){const n=e[t]||{};e[t]=Object.assign(n,i[t])}return e}),{})}(e)))};var e}(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new ue(this,t),this.contextsByScope.set(t,e)),e}}class fe{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){return(this.data.get(this.getDataKey(t))||"").match(/[^\s]+/g)||[]}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class ge{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const n=this.getAttributeNameForKey(t);return this.element.setAttribute(n,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${zt(t)}`}}class ve{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,n){let i=this.warnedKeysByObject.get(t);i||(i=new Set,this.warnedKeysByObject.set(t,i)),i.has(e)||(i.add(e),this.logger.warn(n,t))}}function be(t,e){return`[${t}~="${e}"]`}class ye{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findTarget(e)||this.findLegacyTarget(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllTargets(e),...this.findAllLegacyTargets(e)]),[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){return be(this.schema.targetAttributeForScope(this.identifier),t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map((e=>this.deprecate(e,t)))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return be(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:n}=this,i=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(n);this.guide.warn(t,`target:${e}`,`Please replace ${i}="${n}.${e}" with ${r}="${e}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class we{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findOutlet(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllOutlets(e)]),[])}getSelectorForOutletName(t){const e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){const e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){const e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))}matchesElement(t,e,n){const i=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&i.split(" ").includes(n)}}class _e{constructor(t,e,n,i){this.targets=new ye(this),this.classes=new fe(this),this.data=new ge(this),this.containsElement=t=>t.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=n,this.guide=new ve(i),this.outlets=new we(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return be(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new _e(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class Ee{constructor(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new re(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:n}=t,i=this.fetchScopesByIdentifierForElement(e);let r=i.get(n);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,n),i.set(n,r)),r}elementMatchedValue(t,e){const n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),1==n&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),1==n&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class Se{constructor(t){this.application=t,this.scopeObserver=new Ee(this.element,this.schema,this),this.scopesByIdentifier=new te,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((t,e)=>t.concat(e.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new me(this.application,t);this.connectModule(e);const n=t.controllerConstructor.afterLoad;n&&n(t.identifier,this.application)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find((e=>e.element==t))}handleError(t,e,n){this.application.handleError(t,e,n)}createScopeForElementAndIdentifier(t,e){return new _e(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.connectContextForScope(e)))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.disconnectContextForScope(e)))}}const Ae={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:t=>`data-${t}-target`,outletAttributeForScope:(t,e)=>`data-${t}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},Ce("abcdefghijklmnopqrstuvwxyz".split("").map((t=>[t,t])))),Ce("0123456789".split("").map((t=>[t,t]))))};function Ce(t){return t.reduce(((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n})),{})}function Te([t,e],n){return function(t){const e=`${zt(t.token)}-value`,n=function(t){const e=function(t){const e=ke(t.typeObject.type);if(!e)return;const n=Oe(t.typeObject.default);if(e!==n){throw new Error(`The specified default value for the Stimulus Value "${t.controller?`${t.controller}.${t.token}`:t.token}" must match the defined type "${e}". The provided default value of "${t.typeObject.default}" is of type "${n}".`)}return e}({controller:t.controller,token:t.token,typeObject:t.typeDefinition}),n=Oe(t.typeDefinition),i=ke(t.typeDefinition),r=e||n||i;if(r)return r;throw new Error(`Unknown value type "${t.controller?`${t.controller}.${t.typeDefinition}`:t.token}" for "${t.token}" value`)}(t);return{type:n,key:e,name:Ht(e),get defaultValue(){return function(t){const e=ke(t);if(e)return xe[e];const n=t.default;return void 0!==n?n:t}(t.typeDefinition)},get hasCustomDefaultValue(){return void 0!==Oe(t.typeDefinition)},reader:Le[n],writer:Me[n]||Me.default}}({controller:n,token:t,typeDefinition:e})}function ke(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Oe(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}const xe={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Le={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${Oe(e)}"`);return e},boolean:t=>!("0"==t||"false"==String(t).toLowerCase()),number:t=>Number(t),object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${Oe(e)}"`);return e},string:t=>t},Me={default:function(t){return`${t}`},array:Pe,object:Pe};function Pe(t){return JSON.stringify(t)}class Re{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:i=this.identifier,bubbles:r=!0,cancelable:s=!0}={}){const o=new CustomEvent(i?`${i}:${t}`:t,{detail:n,bubbles:r,cancelable:s});return e.dispatchEvent(o),o}}Re.blessings=[function(t){return le(t,"classes").reduce(((t,e)=>{return Object.assign(t,{[`${n=e}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${Wt(n)}Class`]:{get(){return this.classes.has(n)}}});var n}),{})},function(t){return le(t,"targets").reduce(((t,e)=>{return Object.assign(t,{[`${n=e}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${Wt(n)}Target`]:{get(){return this.targets.has(n)}}});var n}),{})},function(t){const e=function(t,e){return ce(t).reduce(((t,n)=>(t.push(...function(t,e){const n=t[e];return n?Object.keys(n).map((t=>[t,n[t]])):[]}(n,e)),t)),[])}(t,"values"),n={valueDescriptorMap:{get(){return e.reduce(((t,e)=>{const n=Te(e,this.identifier),i=this.data.getAttributeNameForKey(n.key);return Object.assign(t,{[i]:n})}),{})}}};return e.reduce(((t,e)=>Object.assign(t,function(t,e){const n=Te(t,void 0),{key:i,name:r,reader:s,writer:o}=n;return{[r]:{get(){const t=this.data.get(i);return null!==t?s(t):n.defaultValue},set(t){void 0===t?this.data.delete(i):this.data.set(i,o(t))}},[`has${Wt(r)}`]:{get(){return this.data.has(i)||n.hasCustomDefaultValue}}}}(e))),n)},function(t){return le(t,"outlets").reduce(((t,e)=>Object.assign(t,function(t){const e=Vt(t);return{[`${e}Outlet`]:{get(){const e=this.outlets.find(t);if(e){const n=this.application.getControllerForElementAndIdentifier(e,t);if(n)return n;throw new Error(`Missing "data-controller=${t}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${t}" for "${this.identifier}" controller`)}},[`${e}Outlets`]:{get(){const e=this.outlets.findAll(t);return e.length>0?e.map((e=>{const n=this.application.getControllerForElementAndIdentifier(e,t);if(n)return n;console.warn(`The provided outlet element is missing the outlet controller "${t}" for "${this.identifier}"`,e)})).filter((t=>t)):[]}},[`${e}OutletElement`]:{get(){const e=this.outlets.find(t);if(e)return e;throw new Error(`Missing outlet element "${t}" for "${this.identifier}" controller`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(t)}},[`has${Wt(e)}Outlet`]:{get(){return this.outlets.has(t)}}}}(e))),{})}],Re.targets=[],Re.outlets=[],Re.values={};const De=class{constructor(t=document.documentElement,e=Ae){this.logger=console,this.debug=!1,this.logDebugActivity=(t,e,n={})=>{this.debug&&this.logFormattedMessage(t,e,n)},this.element=t,this.schema=e,this.dispatcher=new Bt(this),this.router=new Se(this),this.actionDescriptorFilters=Object.assign({},$t)}static start(t,e){const n=new this(t,e);return n.start(),n}async start(){await new Promise((t=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>t())):t()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>{t.controllerConstructor.shouldLoad&&this.router.loadDefinition(t)}))}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>this.router.unloadIdentifier(t)))}get controllers(){return this.router.contexts.map((t=>t.controller))}getControllerForElementAndIdentifier(t,e){const n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null}handleError(t,e,n){var i;this.logger.error("%s\n\n%o\n\n%o",e,t,n),null===(i=window.onerror)||void 0===i||i.call(window,e,"",0,0,t)}logFormattedMessage(t,e,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}.start();De.debug=!1,window.Stimulus=De;var Ie=n(651),Ne=n.n(Ie),Fe=n(363),je=n.n(Fe);function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){He(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ve(){return Ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ve.apply(this,arguments)}function We(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var ze=We(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ue=We(/Edge/i),Ke=We(/firefox/i),Ge=We(/safari/i)&&!We(/chrome/i)&&!We(/android/i),Xe=We(/iP(ad|od|hone)/i),Ye=We(/chrome/i)&&We(/android/i),Qe={capture:!1,passive:!1};function Je(t,e,n){t.addEventListener(e,n,!ze&&Qe)}function Ze(t,e,n){t.removeEventListener(e,n,!ze&&Qe)}function tn(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function en(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function nn(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&tn(t,e):tn(t,e))||i&&t===n)return t;if(t===n)break}while(t=en(t))}return null}var rn,sn=/\s+/g;function on(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(sn," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(sn," ")}}function an(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function ln(t,e){var n="";if("string"==typeof t)n=t;else do{var i=an(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function cn(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function hn(){return document.scrollingElement||document.documentElement}function un(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var s,o,a,l,c,h,u;if(t!==window&&t.parentNode&&t!==hn()?(o=(s=t.getBoundingClientRect()).top,a=s.left,l=s.bottom,c=s.right,h=s.height,u=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!ze))do{if(r&&r.getBoundingClientRect&&("none"!==an(r,"transform")||n&&"static"!==an(r,"position"))){var d=r.getBoundingClientRect();o-=d.top+parseInt(an(r,"border-top-width")),a-=d.left+parseInt(an(r,"border-left-width")),l=o+s.height,c=a+s.width;break}}while(r=r.parentNode);if(i&&t!==window){var p=ln(r||t),m=p&&p.a,f=p&&p.d;p&&(l=(o/=f)+(h/=f),c=(a/=m)+(u/=m))}return{top:o,left:a,bottom:l,right:c,width:u,height:h}}}function dn(t,e,n){for(var i=vn(t,!0),r=un(t)[e];i;){var s=un(i)[n];if(!("top"===n||"left"===n?r>=s:r<=s))return i;if(i===hn())break;i=vn(i,!1)}return!1}function pn(t,e,n,i){for(var r=0,s=0,o=t.children;s<o.length;){if("none"!==o[s].style.display&&o[s]!==yi.ghost&&(i||o[s]!==yi.dragged)&&nn(o[s],n.draggable,t,!1)){if(r===e)return o[s];r++}s++}return null}function mn(t,e){for(var n=t.lastElementChild;n&&(n===yi.ghost||"none"===an(n,"display")||e&&!tn(n,e));)n=n.previousElementSibling;return n||null}function fn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===yi.clone||e&&!tn(t,e)||n++;return n}function gn(t){var e=0,n=0,i=hn();if(t)do{var r=ln(t),s=r.a,o=r.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,n]}function vn(t,e){if(!t||!t.getBoundingClientRect)return hn();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=an(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return hn();if(i||e)return n;i=!0}}}while(n=n.parentNode);return hn()}function bn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function yn(t,e){return function(){if(!rn){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),rn=setTimeout((function(){rn=void 0}),e)}}}function wn(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _n(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var En="Sortable"+(new Date).getTime();var Sn=[],An={initializeByDefault:!0},Cn={mount:function(t){for(var e in An)An.hasOwnProperty(e)&&!(e in t)&&(t[e]=An[e]);Sn.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Sn.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=t+"Global";Sn.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r]($e({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t]($e({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in Sn.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var s=new i(t,e,t.options);s.sortable=t,s.options=t.options,t[r]=s,Ve(n,s.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);void 0!==s&&(t.options[r]=s)}},getEventProperties:function(t,e){var n={};return Sn.forEach((function(i){"function"==typeof i.eventProperties&&Ve(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return Sn.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};var Tn=["evt"],kn=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(n,Tn);Cn.pluginEvent.bind(yi)(t,e,$e({dragEl:xn,parentEl:Ln,ghostEl:Mn,rootEl:Pn,nextEl:Rn,lastDownEl:Dn,cloneEl:In,cloneHidden:Nn,dragStarted:Xn,putSortable:Hn,activeSortable:yi.active,originalEvent:i,oldIndex:Fn,oldDraggableIndex:Bn,newIndex:jn,newDraggableIndex:$n,hideGhostForTarget:fi,unhideGhostForTarget:gi,cloneNowHidden:function(){Nn=!0},cloneNowShown:function(){Nn=!1},dispatchSortableEvent:function(t){On({sortable:e,name:t,originalEvent:i})}},r))};function On(t){!function(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,u=t.newDraggableIndex,d=t.originalEvent,p=t.putSortable,m=t.extraEventProperties;if(e=e||n&&n[En]){var f,g=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||ze||Ue?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=o||n,f.from=a||n,f.item=r||n,f.clone=s,f.oldIndex=l,f.newIndex=c,f.oldDraggableIndex=h,f.newDraggableIndex=u,f.originalEvent=d,f.pullMode=p?p.lastPutMode:void 0;var b=$e($e({},m),Cn.getEventProperties(i,e));for(var y in b)f[y]=b[y];n&&n.dispatchEvent(f),g[v]&&g[v].call(e,f)}}($e({putSortable:Hn,cloneEl:In,targetEl:xn,rootEl:Pn,oldIndex:Fn,oldDraggableIndex:Bn,newIndex:jn,newDraggableIndex:$n},t))}var xn,Ln,Mn,Pn,Rn,Dn,In,Nn,Fn,jn,Bn,$n,qn,Hn,Vn,Wn,zn,Un,Kn,Gn,Xn,Yn,Qn,Jn,Zn,ti=!1,ei=!1,ni=[],ii=!1,ri=!1,si=[],oi=!1,ai=[],li="undefined"!=typeof document,ci=Xe,hi=Ue||ze?"cssFloat":"float",ui=li&&!Ye&&!Xe&&"draggable"in document.createElement("div"),di=function(){if(li){if(ze)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),pi=function(t,e){var n=an(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=pn(t,0,e),s=pn(t,1,e),o=r&&an(r),a=s&&an(s),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+un(r).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+un(s).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&o.float&&"none"!==o.float){var h="left"===o.float?"left":"right";return!s||"both"!==a.clear&&a.clear!==h?"horizontal":"vertical"}return r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=i&&"none"===n[hi]||s&&"none"===n[hi]&&l+c>i)?"vertical":"horizontal"},mi=function(t){function e(t,n){return function(i,r,s,o){var a=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||a))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(i,r,s,o),n)(i,r,s,o);var l=(n?i:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},i=t.group;i&&"object"==qe(i)||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},fi=function(){!di&&Mn&&an(Mn,"display","none")},gi=function(){!di&&Mn&&an(Mn,"display","")};li&&!Ye&&document.addEventListener("click",(function(t){if(ei)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ei=!1,!1}),!0);var vi=function(t){if(xn){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,s=t.clientY,ni.some((function(t){var e=t[En].options.emptyInsertThreshold;if(e&&!mn(t)){var n=un(t),i=r>=n.left-e&&r<=n.right+e,a=s>=n.top-e&&s<=n.bottom+e;return i&&a?o=t:void 0}})),o);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[En]._onDragOver(n)}}var r,s,o},bi=function(t){xn&&xn.parentNode[En]._isOutsideThisEl(t.target)};function yi(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ve({},e),t[En]=this;var n,i,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yi.supportPointer&&"PointerEvent"in window&&!Ge,emptyInsertThreshold:5};for(var s in Cn.initializePlugins(this,t,r),r)!(s in e)&&(e[s]=r[s]);for(var o in mi(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&ui,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Je(t,"pointerdown",this._onTapStart):(Je(t,"mousedown",this._onTapStart),Je(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Je(t,"dragover",this),Je(t,"dragenter",this)),ni.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ve(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==an(t,"display")&&t!==yi.ghost){i.push({target:t,rect:un(t)});var e=$e({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=ln(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var r=!1,s=0;i.forEach((function(t){var n=0,i=t.target,o=i.fromRect,a=un(i),l=i.prevFromRect,c=i.prevToRect,h=t.rect,u=ln(i,!0);u&&(a.top-=u.f,a.left-=u.e),i.toRect=a,i.thisAnimationDuration&&bn(l,a)&&!bn(o,a)&&(h.top-a.top)/(h.left-a.left)==(o.top-a.top)/(o.left-a.left)&&(n=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(h,l,c,e.options)),bn(a,o)||(i.prevFromRect=o,i.prevToRect=a,n||(n=e.options.animation),e.animate(i,h,a,n)),n&&(r=!0,s=Math.max(s,n),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),n),i.thisAnimationDuration=n)})),clearTimeout(n),r?n=setTimeout((function(){"function"==typeof t&&t()}),s):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){an(t,"transition",""),an(t,"transform","");var r=ln(this.el),s=r&&r.a,o=r&&r.d,a=(e.left-n.left)/(s||1),l=(e.top-n.top)/(o||1);t.animatingX=!!a,t.animatingY=!!l,an(t,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),an(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),an(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){an(t,"transition",""),an(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}))}function wi(t,e,n,i,r,s,o,a){var l,c,h=t[En],u=h.options.onMove;return!window.CustomEvent||ze||Ue?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=s||un(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(c=u.call(h,l,o)),c}function _i(t){t.draggable=!1}function Ei(){oi=!1}function Si(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Ai(t){return setTimeout(t,0)}function Ci(t){return clearTimeout(t)}yi.prototype={constructor:yi,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Yn=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,xn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,s=t.type,o=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,c=i.filter;if(function(t){ai.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&ai.push(i)}}(n),!xn&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Ge||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=nn(a,i.draggable,n,!1))&&a.animated||Dn===a)){if(Fn=fn(a),Bn=fn(a,i.draggable),"function"==typeof c){if(c.call(this,t,a,this))return On({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),kn("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=nn(l,i.trim(),n,!1))return On({sortable:e,rootEl:i,name:"filter",targetEl:a,fromEl:n,toEl:n}),kn("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());i.handle&&!nn(l,i.handle,n,!1)||this._prepareDragStart(t,o,a)}}},_prepareDragStart:function(t,e,n){var i,r=this,s=r.el,o=r.options,a=s.ownerDocument;if(n&&!xn&&n.parentNode===s){var l=un(n);if(Pn=s,Ln=(xn=n).parentNode,Rn=xn.nextSibling,Dn=n,qn=o.group,yi.dragged=xn,Vn={target:xn,clientX:(e||t).clientX,clientY:(e||t).clientY},Kn=Vn.clientX-l.left,Gn=Vn.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,xn.style["will-change"]="all",i=function(){kn("delayEnded",r,{evt:t}),yi.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Ke&&r.nativeDraggable&&(xn.draggable=!0),r._triggerDragStart(t,e),On({sortable:r,name:"choose",originalEvent:t}),on(xn,o.chosenClass,!0))},o.ignore.split(",").forEach((function(t){cn(xn,t.trim(),_i)})),Je(a,"dragover",vi),Je(a,"mousemove",vi),Je(a,"touchmove",vi),Je(a,"mouseup",r._onDrop),Je(a,"touchend",r._onDrop),Je(a,"touchcancel",r._onDrop),Ke&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xn.draggable=!0),kn("delayStart",this,{evt:t}),!o.delay||o.delayOnTouchOnly&&!e||this.nativeDraggable&&(Ue||ze))i();else{if(yi.eventCanceled)return void this._onDrop();Je(a,"mouseup",r._disableDelayedDrag),Je(a,"touchend",r._disableDelayedDrag),Je(a,"touchcancel",r._disableDelayedDrag),Je(a,"mousemove",r._delayedDragTouchMoveHandler),Je(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&Je(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,o.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xn&&_i(xn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Ze(t,"mouseup",this._disableDelayedDrag),Ze(t,"touchend",this._disableDelayedDrag),Ze(t,"touchcancel",this._disableDelayedDrag),Ze(t,"mousemove",this._delayedDragTouchMoveHandler),Ze(t,"touchmove",this._delayedDragTouchMoveHandler),Ze(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?Je(document,"pointermove",this._onTouchMove):Je(document,e?"touchmove":"mousemove",this._onTouchMove):(Je(xn,"dragend",this),Je(Pn,"dragstart",this._onDragStart));try{document.selection?Ai((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(ti=!1,Pn&&xn){kn("dragStarted",this,{evt:e}),this.nativeDraggable&&Je(document,"dragover",bi);var n=this.options;!t&&on(xn,n.dragClass,!1),on(xn,n.ghostClass,!0),yi.active=this,t&&this._appendGhost(),On({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Wn){this._lastX=Wn.clientX,this._lastY=Wn.clientY,fi();for(var t=document.elementFromPoint(Wn.clientX,Wn.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Wn.clientX,Wn.clientY))!==e;)e=t;if(xn.parentNode[En]._isOutsideThisEl(t),e)do{if(e[En]&&e[En]._onDragOver({clientX:Wn.clientX,clientY:Wn.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);gi()}},_onTouchMove:function(t){if(Vn){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,s=Mn&&ln(Mn,!0),o=Mn&&s&&s.a,a=Mn&&s&&s.d,l=ci&&Zn&&gn(Zn),c=(r.clientX-Vn.clientX+i.x)/(o||1)+(l?l[0]-si[0]:0)/(o||1),h=(r.clientY-Vn.clientY+i.y)/(a||1)+(l?l[1]-si[1]:0)/(a||1);if(!yi.active&&!ti){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Mn){s?(s.e+=c-(zn||0),s.f+=h-(Un||0)):s={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");an(Mn,"webkitTransform",u),an(Mn,"mozTransform",u),an(Mn,"msTransform",u),an(Mn,"transform",u),zn=c,Un=h,Wn=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Mn){var t=this.options.fallbackOnBody?document.body:Pn,e=un(xn,!0,ci,!0,t),n=this.options;if(ci){for(Zn=t;"static"===an(Zn,"position")&&"none"===an(Zn,"transform")&&Zn!==document;)Zn=Zn.parentNode;Zn!==document.body&&Zn!==document.documentElement?(Zn===document&&(Zn=hn()),e.top+=Zn.scrollTop,e.left+=Zn.scrollLeft):Zn=hn(),si=gn(Zn)}on(Mn=xn.cloneNode(!0),n.ghostClass,!1),on(Mn,n.fallbackClass,!0),on(Mn,n.dragClass,!0),an(Mn,"transition",""),an(Mn,"transform",""),an(Mn,"box-sizing","border-box"),an(Mn,"margin",0),an(Mn,"top",e.top),an(Mn,"left",e.left),an(Mn,"width",e.width),an(Mn,"height",e.height),an(Mn,"opacity","0.8"),an(Mn,"position",ci?"absolute":"fixed"),an(Mn,"zIndex","100000"),an(Mn,"pointerEvents","none"),yi.ghost=Mn,t.appendChild(Mn),an(Mn,"transform-origin",Kn/parseInt(Mn.style.width)*100+"% "+Gn/parseInt(Mn.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;kn("dragStart",this,{evt:t}),yi.eventCanceled?this._onDrop():(kn("setupClone",this),yi.eventCanceled||((In=_n(xn)).removeAttribute("id"),In.draggable=!1,In.style["will-change"]="",this._hideClone(),on(In,this.options.chosenClass,!1),yi.clone=In),n.cloneId=Ai((function(){kn("clone",n),yi.eventCanceled||(n.options.removeCloneOnHide||Pn.insertBefore(In,xn),n._hideClone(),On({sortable:n,name:"clone"}))})),!e&&on(xn,r.dragClass,!0),e?(ei=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Ze(document,"mouseup",n._onDrop),Ze(document,"touchend",n._onDrop),Ze(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,xn)),Je(document,"drop",n),an(xn,"transform","translateZ(0)")),ti=!0,n._dragStartId=Ai(n._dragStarted.bind(n,e,t)),Je(document,"selectstart",n),Xn=!0,Ge&&an(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,r,s=this.el,o=t.target,a=this.options,l=a.group,c=yi.active,h=qn===l,u=a.sort,d=Hn||c,p=this,m=!1;if(!oi){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=nn(o,a.draggable,s,!0),x("dragOver"),yi.eventCanceled)return m;if(xn.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return M(!1);if(ei=!1,c&&!a.disabled&&(h?u||(i=Ln!==Pn):Hn===this||(this.lastPutMode=qn.checkPull(this,c,xn,t))&&l.checkPut(this,c,xn,t))){if(r="vertical"===this._getDirection(t,o),e=un(xn),x("dragOverValid"),yi.eventCanceled)return m;if(i)return Ln=Pn,L(),this._hideClone(),x("revert"),yi.eventCanceled||(Rn?Pn.insertBefore(xn,Rn):Pn.appendChild(xn)),M(!0);var f=mn(s,a.draggable);if(!f||function(t,e,n){var i=un(mn(n.el,n.options.draggable));return e?t.clientX>i.right+10||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+10}(t,r,this)&&!f.animated){if(f===xn)return M(!1);if(f&&s===t.target&&(o=f),o&&(n=un(o)),!1!==wi(Pn,s,xn,e,o,n,t,!!o))return L(),f&&f.nextSibling?s.insertBefore(xn,f.nextSibling):s.appendChild(xn),Ln=s,P(),M(!0)}else if(f&&function(t,e,n){var i=un(pn(n.el,0,n.options,!0));return e?t.clientX<i.left-10||t.clientY<i.top&&t.clientX<i.right:t.clientY<i.top-10||t.clientY<i.bottom&&t.clientX<i.left}(t,r,this)){var g=pn(s,0,a,!0);if(g===xn)return M(!1);if(n=un(o=g),!1!==wi(Pn,s,xn,e,o,n,t,!1))return L(),s.insertBefore(xn,g),Ln=s,P(),M(!0)}else if(o.parentNode===s){n=un(o);var v,b,y,w=xn.parentNode!==s,_=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,s=n?t.width:t.height,o=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height;return i===o||r===a||i+s/2===o+l/2}(xn.animated&&xn.toRect||e,o.animated&&o.toRect||n,r),E=r?"top":"left",S=dn(o,"top","top")||dn(xn,"top","top"),A=S?S.scrollTop:void 0;if(Yn!==o&&(b=n[E],ii=!1,ri=!_&&a.invertSwap||w),v=function(t,e,n,i,r,s,o,a){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,h=i?n.top:n.left,u=i?n.bottom:n.right,d=!1;if(!o)if(a&&Jn<c*r){if(!ii&&(1===Qn?l>h+c*s/2:l<u-c*s/2)&&(ii=!0),ii)d=!0;else if(1===Qn?l<h+Jn:l>u-Jn)return-Qn}else if(l>h+c*(1-r)/2&&l<u-c*(1-r)/2)return function(t){return fn(xn)<fn(t)?1:-1}(e);return(d=d||o)&&(l<h+c*s/2||l>u-c*s/2)?l>h+c/2?1:-1:0}(t,o,n,r,_?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,ri,Yn===o),0!==v){var C=fn(xn);do{C-=v,y=Ln.children[C]}while(y&&("none"===an(y,"display")||y===Mn))}if(0===v||y===o)return M(!1);Yn=o,Qn=v;var T=o.nextElementSibling,k=!1,O=wi(Pn,s,xn,e,o,n,t,k=1===v);if(!1!==O)return 1!==O&&-1!==O||(k=1===O),oi=!0,setTimeout(Ei,30),L(),k&&!T?s.appendChild(xn):o.parentNode.insertBefore(xn,k?T:o),S&&wn(S,0,A-S.scrollTop),Ln=xn.parentNode,void 0===b||ri||(Jn=Math.abs(b-un(o)[E])),P(),M(!0)}if(s.contains(xn))return M(!1)}return!1}function x(a,l){kn(a,p,$e({evt:t,isOwner:h,axis:r?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:u,fromSortable:d,target:o,completed:M,onMove:function(n,i){return wi(Pn,s,xn,e,n,un(n),t,i)},changed:P},l))}function L(){x("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function M(e){return x("dragOverCompleted",{insertion:e}),e&&(h?c._hideClone():c._showClone(p),p!==d&&(on(xn,Hn?Hn.options.ghostClass:c.options.ghostClass,!1),on(xn,a.ghostClass,!0)),Hn!==p&&p!==yi.active?Hn=p:p===yi.active&&Hn&&(Hn=null),d===p&&(p._ignoreWhileAnimating=o),p.animateAll((function(){x("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(o===xn&&!xn.animated||o===s&&!o.animated)&&(Yn=null),a.dragoverBubble||t.rootEl||o===document||(xn.parentNode[En]._isOutsideThisEl(t.target),!e&&vi(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),m=!0}function P(){jn=fn(xn),$n=fn(xn,a.draggable),On({sortable:p,name:"change",toEl:s,newIndex:jn,newDraggableIndex:$n,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ze(document,"mousemove",this._onTouchMove),Ze(document,"touchmove",this._onTouchMove),Ze(document,"pointermove",this._onTouchMove),Ze(document,"dragover",vi),Ze(document,"mousemove",vi),Ze(document,"touchmove",vi)},_offUpEvents:function(){var t=this.el.ownerDocument;Ze(t,"mouseup",this._onDrop),Ze(t,"touchend",this._onDrop),Ze(t,"pointerup",this._onDrop),Ze(t,"touchcancel",this._onDrop),Ze(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;jn=fn(xn),$n=fn(xn,n.draggable),kn("drop",this,{evt:t}),Ln=xn&&xn.parentNode,jn=fn(xn),$n=fn(xn,n.draggable),yi.eventCanceled||(ti=!1,ri=!1,ii=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ci(this.cloneId),Ci(this._dragStartId),this.nativeDraggable&&(Ze(document,"drop",this),Ze(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ge&&an(document.body,"user-select",""),an(xn,"transform",""),t&&(Xn&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Mn&&Mn.parentNode&&Mn.parentNode.removeChild(Mn),(Pn===Ln||Hn&&"clone"!==Hn.lastPutMode)&&In&&In.parentNode&&In.parentNode.removeChild(In),xn&&(this.nativeDraggable&&Ze(xn,"dragend",this),_i(xn),xn.style["will-change"]="",Xn&&!ti&&on(xn,Hn?Hn.options.ghostClass:this.options.ghostClass,!1),on(xn,this.options.chosenClass,!1),On({sortable:this,name:"unchoose",toEl:Ln,newIndex:null,newDraggableIndex:null,originalEvent:t}),Pn!==Ln?(jn>=0&&(On({rootEl:Ln,name:"add",toEl:Ln,fromEl:Pn,originalEvent:t}),On({sortable:this,name:"remove",toEl:Ln,originalEvent:t}),On({rootEl:Ln,name:"sort",toEl:Ln,fromEl:Pn,originalEvent:t}),On({sortable:this,name:"sort",toEl:Ln,originalEvent:t})),Hn&&Hn.save()):jn!==Fn&&jn>=0&&(On({sortable:this,name:"update",toEl:Ln,originalEvent:t}),On({sortable:this,name:"sort",toEl:Ln,originalEvent:t})),yi.active&&(null!=jn&&-1!==jn||(jn=Fn,$n=Bn),On({sortable:this,name:"end",toEl:Ln,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){kn("nulling",this),Pn=xn=Ln=Mn=Rn=In=Dn=Nn=Vn=Wn=Xn=jn=$n=Fn=Bn=Yn=Qn=Hn=qn=yi.dragged=yi.ghost=yi.clone=yi.active=null,ai.forEach((function(t){t.checked=!0})),ai.length=zn=Un=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":xn&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,s=this.options;i<r;i++)nn(t=n[i],s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Si(t));return e},sort:function(t,e){var n={},i=this.el;this.toArray().forEach((function(t,e){var r=i.children[e];nn(r,this.options.draggable,i,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return nn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=Cn.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&mi(n)},destroy:function(){kn("destroy",this);var t=this.el;t[En]=null,Ze(t,"mousedown",this._onTapStart),Ze(t,"touchstart",this._onTapStart),Ze(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ze(t,"dragover",this),Ze(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ni.splice(ni.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Nn){if(kn("hideClone",this),yi.eventCanceled)return;an(In,"display","none"),this.options.removeCloneOnHide&&In.parentNode&&In.parentNode.removeChild(In),Nn=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Nn){if(kn("showClone",this),yi.eventCanceled)return;xn.parentNode!=Pn||this.options.group.revertClone?Rn?Pn.insertBefore(In,Rn):Pn.appendChild(In):Pn.insertBefore(In,xn),this.options.group.revertClone&&this.animate(xn,In),an(In,"display",""),Nn=!1}}else this._hideClone()}},li&&Je(document,"touchmove",(function(t){(yi.active||ti)&&t.cancelable&&t.preventDefault()})),yi.utils={on:Je,off:Ze,css:an,find:cn,is:function(t,e){return!!nn(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:yn,closest:nn,toggleClass:on,clone:_n,index:fn,nextTick:Ai,cancelNextTick:Ci,detectDirection:pi,getChild:pn},yi.get=function(t){return t[En]},yi.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(yi.utils=$e($e({},yi.utils),t.utils)),Cn.mount(t)}))},yi.create=function(t,e){return new yi(t,e)},yi.version="1.15.0";var Ti,ki,Oi,xi,Li,Mi,Pi=[],Ri=!1;function Di(){Pi.forEach((function(t){clearInterval(t.pid)})),Pi=[]}function Ii(){clearInterval(Mi)}var Ni=yn((function(t,e,n,i){if(e.scroll){var r,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,c=hn(),h=!1;ki!==n&&(ki=n,Di(),Ti=e.scroll,r=e.scrollFn,!0===Ti&&(Ti=vn(n,!0)));var u=0,d=Ti;do{var p=d,m=un(p),f=m.top,g=m.bottom,v=m.left,b=m.right,y=m.width,w=m.height,_=void 0,E=void 0,S=p.scrollWidth,A=p.scrollHeight,C=an(p),T=p.scrollLeft,k=p.scrollTop;p===c?(_=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),E=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=y<S&&("auto"===C.overflowX||"scroll"===C.overflowX),E=w<A&&("auto"===C.overflowY||"scroll"===C.overflowY));var O=_&&(Math.abs(b-s)<=a&&T+y<S)-(Math.abs(v-s)<=a&&!!T),x=E&&(Math.abs(g-o)<=a&&k+w<A)-(Math.abs(f-o)<=a&&!!k);if(!Pi[u])for(var L=0;L<=u;L++)Pi[L]||(Pi[L]={});Pi[u].vx==O&&Pi[u].vy==x&&Pi[u].el===p||(Pi[u].el=p,Pi[u].vx=O,Pi[u].vy=x,clearInterval(Pi[u].pid),0==O&&0==x||(h=!0,Pi[u].pid=setInterval(function(){i&&0===this.layer&&yi.active._onTouchMove(Li);var e=Pi[this.layer].vy?Pi[this.layer].vy*l:0,n=Pi[this.layer].vx?Pi[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(yi.dragged.parentNode[En],n,e,t,Li,Pi[this.layer].el)||wn(Pi[this.layer].el,n,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&d!==c&&(d=vn(d,!1)));Ri=h}}),30),Fi=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,s=t.dispatchSortableEvent,o=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=n||r;o();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(h)&&(s("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ji(){}function Bi(){}ji.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=pn(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Fi},Ve(ji,{pluginName:"revertOnSpill"}),Bi.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Fi},Ve(Bi,{pluginName:"removeOnSpill"}),yi.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?Je(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Je(document,"pointermove",this._handleFallbackAutoScroll):e.touches?Je(document,"touchmove",this._handleFallbackAutoScroll):Je(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?Ze(document,"dragover",this._handleAutoScroll):(Ze(document,"pointermove",this._handleFallbackAutoScroll),Ze(document,"touchmove",this._handleFallbackAutoScroll),Ze(document,"mousemove",this._handleFallbackAutoScroll)),Ii(),Di(),clearTimeout(rn),rn=void 0},nulling:function(){Li=ki=Ti=Ri=Mi=Oi=xi=null,Pi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(i,r);if(Li=t,e||this.options.forceAutoScrollFallback||Ue||ze||Ge){Ni(t,this.options,s,e);var o=vn(s,!0);!Ri||Mi&&i===Oi&&r===xi||(Mi&&Ii(),Mi=setInterval((function(){var s=vn(document.elementFromPoint(i,r),!0);s!==o&&(o=s,Di()),Ni(t,n.options,s,e)}),10),Oi=i,xi=r)}else{if(!this.options.bubbleScroll||vn(s,!0)===hn())return void Di();Ni(t,this.options,vn(s,!1),!1)}}},Ve(t,{pluginName:"scroll",initializeByDefault:!0})}),yi.mount(Bi,ji);const $i=yi;De.register("address-autocomplete",class extends Re{static values={apiKey:String};static targets=["title","address","city","latitude","longitude"];connect(){console.log("Hello from autocomplete controller"),this.geocoder=new(Ne())({accessToken:this.apiKeyValue,types:"neighborhood,address,poi"}),this.geocoder.addTo(this.element),this.geocoder.on("result",(t=>this.#t(t))),this.geocoder.on("clear",(()=>this.#e()))}#t(t){this.addressTarget.value=t.result.place_name,this.latitudeTarget.value=t.result.geometry.coordinates[1],this.longitudeTarget.value=t.result.geometry.coordinates[0];let e=null,n=null;t.result.context.forEach((t=>{for(const[i,r]of Object.entries(t))r.includes("place")?e=t.text:r.includes("district")&&(n=t.text)})),this.cityTarget.value=null===e?n:e,t.result.id.includes("poi")?this.titleTarget.value=t.result.text:this.titleTarget.value="Custom location"}#e(){this.addressTarget.value=""}disconnect(){this.geocoder.onRemove()}}),De.register("clipboard",class extends Re{static targets=["input"];static values={feedbackText:String};connect(){console.log("clipboard controller hellow")}copy(t){console.log("Just copied this:"),console.log(this.inputTarget.value),navigator.clipboard.writeText(this.inputTarget.value),t.currentTarget.disabled=!0,t.currentTarget.innerText=this.feedbackTextValue}}),De.register("gif-loop",class extends Re{static targets=["gif"];connect(){console.log(this.gifTarget.src),setInterval((()=>{this.gifTarget.src="https://res.cloudinary.com/dcuj8efm3/image/upload/v1678444548/map_animated_d4rahd.gif"}),6e3)}}),De.register("hello",class extends Re{connect(){this.element.textContent="Hello World!"}}),De.register("map",class extends Re{static values={apiKey:String,markers:Array,routeId:Number};connect(){console.log("Hello from MAP controller"),mapboxgl.accessToken=this.apiKeyValue;const t=this.markersValue,e={};if(t.forEach((t=>{e[t.pos]={lat:t.lat,lng:t.lng,marker_html:t.marker_html}})),1==Object.keys(e).length)new mapboxgl.Map({container:this.element,style:"mapbox://styles/mapbox/streets-v10",center:[e[1].lng,e[1].lat],zoom:13}),this.#n(e);else if(Object.keys(e).length>=2){this.map=new mapboxgl.Map({container:this.element,style:"mapbox://styles/mapbox/streets-v10",zoom:6}),this.#n(e),this.#i(e);let t="https://api.mapbox.com/directions/v5/mapbox/walking/",n=1;for(const i in e)t=n==Object.keys(e).length?t+e[i].lng+","+e[i].lat+`?exclude=ferry&geometries=geojson&access_token=${mapboxgl.accessToken}`:t+e[i].lng+","+e[i].lat+";",n+=1;this.#r(t)}else this.map=new mapboxgl.Map({container:this.element,center:[-.07689440189122204,51.53294032339022],style:"mapbox://styles/mapbox/streets-v10",zoom:10})}#n(t){for(const e in t){const n=document.createElement("div");n.innerHTML=t[e].marker_html,new mapboxgl.Marker(n).setLngLat([t[e].lng,t[e].lat]).addTo(this.map)}}#i(t){const e=new mapboxgl.LngLatBounds;for(const n in t)e.extend([t[n].lng,t[n].lat]);this.map.fitBounds(e,{padding:80,duration:0})}#r(t){fetch(t).then((t=>t.json())).then((t=>{const e={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.routes[0].geometry.coordinates}};this.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:e},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),this.#s(t)}))}#s(t){const e=new FormData,n=t.routes[0].distance,i=t.routes[0].duration,r=parseFloat((n/1e3).toFixed(2)),s=Math.round(i/60);console.log("Time in minutes"),console.log(s),e.append("route[distance]",r),e.append("route[time]",s),je().ajax({url:`/routes/${this.routeIdValue}/move`,type:"PATCH",data:e}),console.log("I am here now"),document.querySelector("#testnik").niklas.add(s,r)}}),De.register("niklas",class extends Re{static targets=["time","distance"];static values={time:Number,distance:Number};connect(){console.log("Ciao from niklas controller"),this.element[this.identifier]=this}add(t,e){console.log("Routed to niklas controller"),console.log(`New time: ${t}`),this.distanceTarget.innerText=e,this.timeTarget.innerText=t,console.log("Updated display of time and distance :) ")}}),De.register("sortable",class extends Re{connect(){console.log("Sortable controller is connected!"),this.sortable=$i.create(this.element,{animation:150,ghostClass:"blue-background-class",onEnd:this.end.bind(this)})}end(t){console.log(t);let e=t.item.dataset.id,n=new FormData;0===t.newIndex?n.append("position",1):n.append("position",t.newIndex+1);for(const[t,e]of n.entries())console.log(`${t}: ${e}`);this.element.dataset.routeId,console.log(this.data.get("url").replace(":id",e)),je().ajax({url:this.data.get("url").replace(":id",e),type:"PATCH",data:n,success:function(){console.log("Page is reloading..."),document.location.reload()}})}});var qi="top",Hi="bottom",Vi="right",Wi="left",zi="auto",Ui=[qi,Hi,Vi,Wi],Ki="start",Gi="end",Xi="clippingParents",Yi="viewport",Qi="popper",Ji="reference",Zi=Ui.reduce((function(t,e){return t.concat([e+"-"+Ki,e+"-"+Gi])}),[]),tr=[].concat(Ui,[zi]).reduce((function(t,e){return t.concat([e,e+"-"+Ki,e+"-"+Gi])}),[]),er="beforeRead",nr="read",ir="afterRead",rr="beforeMain",sr="main",or="afterMain",ar="beforeWrite",lr="write",cr="afterWrite",hr=[er,nr,ir,rr,sr,or,ar,lr,cr];function ur(t){return t?(t.nodeName||"").toLowerCase():null}function dr(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function pr(t){return t instanceof dr(t).Element||t instanceof Element}function mr(t){return t instanceof dr(t).HTMLElement||t instanceof HTMLElement}function fr(t){return"undefined"!=typeof ShadowRoot&&(t instanceof dr(t).ShadowRoot||t instanceof ShadowRoot)}const gr={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];mr(r)&&ur(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});mr(i)&&ur(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function vr(t){return t.split("-")[0]}var br=Math.max,yr=Math.min,wr=Math.round;function _r(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Er(){return!/^((?!chrome|android).)*safari/i.test(_r())}function Sr(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&mr(t)&&(r=t.offsetWidth>0&&wr(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&wr(i.height)/t.offsetHeight||1);var o=(pr(t)?dr(t):window).visualViewport,a=!Er()&&n,l=(i.left+(a&&o?o.offsetLeft:0))/r,c=(i.top+(a&&o?o.offsetTop:0))/s,h=i.width/r,u=i.height/s;return{width:h,height:u,top:c,right:l+h,bottom:c+u,left:l,x:l,y:c}}function Ar(t){var e=Sr(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Cr(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fr(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Tr(t){return dr(t).getComputedStyle(t)}function kr(t){return["table","td","th"].indexOf(ur(t))>=0}function Or(t){return((pr(t)?t.ownerDocument:t.document)||window.document).documentElement}function xr(t){return"html"===ur(t)?t:t.assignedSlot||t.parentNode||(fr(t)?t.host:null)||Or(t)}function Lr(t){return mr(t)&&"fixed"!==Tr(t).position?t.offsetParent:null}function Mr(t){for(var e=dr(t),n=Lr(t);n&&kr(n)&&"static"===Tr(n).position;)n=Lr(n);return n&&("html"===ur(n)||"body"===ur(n)&&"static"===Tr(n).position)?e:n||function(t){var e=/firefox/i.test(_r());if(/Trident/i.test(_r())&&mr(t)&&"fixed"===Tr(t).position)return null;var n=xr(t);for(fr(n)&&(n=n.host);mr(n)&&["html","body"].indexOf(ur(n))<0;){var i=Tr(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function Pr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Rr(t,e,n){return br(t,yr(e,n))}function Dr(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Ir(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Nr={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=vr(n.placement),l=Pr(a),c=[Wi,Vi].indexOf(a)>=0?"height":"width";if(s&&o){var h=function(t,e){return Dr("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Ir(t,Ui))}(r.padding,n),u=Ar(s),d="y"===l?qi:Wi,p="y"===l?Hi:Vi,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],f=o[l]-n.rects.reference[l],g=Mr(s),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,b=m/2-f/2,y=h[d],w=v-u[c]-h[p],_=v/2-u[c]/2+b,E=Rr(y,_,w),S=l;n.modifiersData[i]=((e={})[S]=E,e.centerOffset=E-_,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&Cr(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fr(t){return t.split("-")[1]}var jr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Br(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,u=t.isFixed,d=o.x,p=void 0===d?0:d,m=o.y,f=void 0===m?0:m,g="function"==typeof h?h({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=Wi,w=qi,_=window;if(c){var E=Mr(n),S="clientHeight",A="clientWidth";E===dr(n)&&"static"!==Tr(E=Or(n)).position&&"absolute"===a&&(S="scrollHeight",A="scrollWidth"),(r===qi||(r===Wi||r===Vi)&&s===Gi)&&(w=Hi,f-=(u&&E===_&&_.visualViewport?_.visualViewport.height:E[S])-i.height,f*=l?1:-1),r!==Wi&&(r!==qi&&r!==Hi||s!==Gi)||(y=Vi,p-=(u&&E===_&&_.visualViewport?_.visualViewport.width:E[A])-i.width,p*=l?1:-1)}var C,T=Object.assign({position:a},c&&jr),k=!0===h?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:wr(e*i)/i||0,y:wr(n*i)/i||0}}({x:p,y:f}):{x:p,y:f};return p=k.x,f=k.y,l?Object.assign({},T,((C={})[w]=b?"0":"",C[y]=v?"0":"",C.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",C)):Object.assign({},T,((e={})[w]=b?f+"px":"",e[y]=v?p+"px":"",e.transform="",e))}const $r={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:vr(e.placement),variation:Fr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Br(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Br(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var qr={passive:!0};const Hr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=dr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach((function(t){t.addEventListener("scroll",n.update,qr)})),a&&l.addEventListener("resize",n.update,qr),function(){s&&c.forEach((function(t){t.removeEventListener("scroll",n.update,qr)})),a&&l.removeEventListener("resize",n.update,qr)}},data:{}};var Vr={left:"right",right:"left",bottom:"top",top:"bottom"};function Wr(t){return t.replace(/left|right|bottom|top/g,(function(t){return Vr[t]}))}var zr={start:"end",end:"start"};function Ur(t){return t.replace(/start|end/g,(function(t){return zr[t]}))}function Kr(t){var e=dr(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Gr(t){return Sr(Or(t)).left+Kr(t).scrollLeft}function Xr(t){var e=Tr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Yr(t){return["html","body","#document"].indexOf(ur(t))>=0?t.ownerDocument.body:mr(t)&&Xr(t)?t:Yr(xr(t))}function Qr(t,e){var n;void 0===e&&(e=[]);var i=Yr(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=dr(i),o=r?[s].concat(s.visualViewport||[],Xr(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Qr(xr(o)))}function Jr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Zr(t,e,n){return e===Yi?Jr(function(t,e){var n=dr(t),i=Or(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Er();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Gr(t),y:l}}(t,n)):pr(e)?function(t,e){var n=Sr(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Jr(function(t){var e,n=Or(t),i=Kr(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=br(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=br(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Gr(t),l=-i.scrollTop;return"rtl"===Tr(r||n).direction&&(a+=br(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(Or(t)))}function ts(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?vr(r):null,o=r?Fr(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(s){case qi:e={x:a,y:n.y-i.height};break;case Hi:e={x:a,y:n.y+n.height};break;case Vi:e={x:n.x+n.width,y:l};break;case Wi:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=s?Pr(s):null;if(null!=c){var h="y"===c?"height":"width";switch(o){case Ki:e[c]=e[c]-(n[h]/2-i[h]/2);break;case Gi:e[c]=e[c]+(n[h]/2-i[h]/2)}}return e}function es(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,o=void 0===s?t.strategy:s,a=n.boundary,l=void 0===a?Xi:a,c=n.rootBoundary,h=void 0===c?Yi:c,u=n.elementContext,d=void 0===u?Qi:u,p=n.altBoundary,m=void 0!==p&&p,f=n.padding,g=void 0===f?0:f,v=Dr("number"!=typeof g?g:Ir(g,Ui)),b=d===Qi?Ji:Qi,y=t.rects.popper,w=t.elements[m?b:d],_=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=Qr(xr(t)),n=["absolute","fixed"].indexOf(Tr(t).position)>=0&&mr(t)?Mr(t):t;return pr(n)?e.filter((function(t){return pr(t)&&Cr(t,n)&&"body"!==ur(t)})):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=Zr(t,n,i);return e.top=br(r.top,e.top),e.right=yr(r.right,e.right),e.bottom=yr(r.bottom,e.bottom),e.left=br(r.left,e.left),e}),Zr(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(pr(w)?w:w.contextElement||Or(t.elements.popper),l,h,o),E=Sr(t.elements.reference),S=ts({reference:E,element:y,strategy:"absolute",placement:r}),A=Jr(Object.assign({},y,S)),C=d===Qi?A:E,T={top:_.top-C.top+v.top,bottom:C.bottom-_.bottom+v.bottom,left:_.left-C.left+v.left,right:C.right-_.right+v.right},k=t.modifiersData.offset;if(d===Qi&&k){var O=k[r];Object.keys(T).forEach((function(t){var e=[Vi,Hi].indexOf(t)>=0?1:-1,n=[qi,Hi].indexOf(t)>=0?"y":"x";T[t]+=O[n]*e}))}return T}const ns={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=e.options.placement,v=vr(g),b=l||(v!==g&&m?function(t){if(vr(t)===zi)return[];var e=Wr(t);return[Ur(t),e,Ur(e)]}(g):[Wr(g)]),y=[g].concat(b).reduce((function(t,n){return t.concat(vr(n)===zi?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?tr:l,h=Fr(i),u=h?a?Zi:Zi.filter((function(t){return Fr(t)===h})):Ui,d=u.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=u);var p=d.reduce((function(e,n){return e[n]=es(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[vr(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:h,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),w=e.rects.reference,_=e.rects.popper,E=new Map,S=!0,A=y[0],C=0;C<y.length;C++){var T=y[C],k=vr(T),O=Fr(T)===Ki,x=[qi,Hi].indexOf(k)>=0,L=x?"width":"height",M=es(e,{placement:T,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),P=x?O?Vi:Wi:O?Hi:qi;w[L]>_[L]&&(P=Wr(P));var R=Wr(P),D=[];if(s&&D.push(M[k]<=0),a&&D.push(M[P]<=0,M[R]<=0),D.every((function(t){return t}))){A=T,S=!1;break}E.set(T,D)}if(S)for(var I=function(t){var e=y.find((function(e){var n=E.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return A=e,"break"},N=m?3:1;N>0&&"break"!==I(N);N--);e.placement!==A&&(e.modifiersData[i]._skip=!0,e.placement=A,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function is(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function rs(t){return[qi,Vi,Hi,Wi].some((function(e){return t[e]>=0}))}const ss={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=es(e,{elementContext:"reference"}),a=es(e,{altBoundary:!0}),l=is(o,i),c=is(a,r,s),h=rs(l),u=rs(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}},os={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=tr.reduce((function(t,n){return t[n]=function(t,e,n){var i=vr(t),r=[Wi,qi].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[Wi,Vi].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,s),t}),{}),a=o[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}},as={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=ts({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},ls={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,u=n.padding,d=n.tether,p=void 0===d||d,m=n.tetherOffset,f=void 0===m?0:m,g=es(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=vr(e.placement),b=Fr(e.placement),y=!b,w=Pr(v),_="x"===w?"y":"x",E=e.modifiersData.popperOffsets,S=e.rects.reference,A=e.rects.popper,C="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,T="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(E){if(s){var x,L="y"===w?qi:Wi,M="y"===w?Hi:Vi,P="y"===w?"height":"width",R=E[w],D=R+g[L],I=R-g[M],N=p?-A[P]/2:0,F=b===Ki?S[P]:A[P],j=b===Ki?-A[P]:-S[P],B=e.elements.arrow,$=p&&B?Ar(B):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=q[L],V=q[M],W=Rr(0,S[P],$[P]),z=y?S[P]/2-N-W-H-T.mainAxis:F-W-H-T.mainAxis,U=y?-S[P]/2+N+W+V+T.mainAxis:j+W+V+T.mainAxis,K=e.elements.arrow&&Mr(e.elements.arrow),G=K?"y"===w?K.clientTop||0:K.clientLeft||0:0,X=null!=(x=null==k?void 0:k[w])?x:0,Y=R+U-X,Q=Rr(p?yr(D,R+z-X-G):D,R,p?br(I,Y):I);E[w]=Q,O[w]=Q-R}if(a){var J,Z="x"===w?qi:Wi,tt="x"===w?Hi:Vi,et=E[_],nt="y"===_?"height":"width",it=et+g[Z],rt=et-g[tt],st=-1!==[qi,Wi].indexOf(v),ot=null!=(J=null==k?void 0:k[_])?J:0,at=st?it:et-S[nt]-A[nt]-ot+T.altAxis,lt=st?et+S[nt]+A[nt]-ot-T.altAxis:rt,ct=p&&st?function(t,e,n){var i=Rr(t,e,n);return i>n?n:i}(at,et,lt):Rr(p?at:it,et,p?lt:rt);E[_]=ct,O[_]=ct-et}e.modifiersData[i]=O}},requiresIfExists:["offset"]};function cs(t,e,n){void 0===n&&(n=!1);var i,r,s=mr(e),o=mr(e)&&function(t){var e=t.getBoundingClientRect(),n=wr(e.width)/t.offsetWidth||1,i=wr(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=Or(e),l=Sr(t,o,n),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(s||!s&&!n)&&(("body"!==ur(e)||Xr(a))&&(c=(i=e)!==dr(i)&&mr(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Kr(i)),mr(e)?((h=Sr(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=Gr(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function hs(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var us={placement:"bottom",modifiers:[],strategy:"absolute"};function ds(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function ps(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?us:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},us,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:pr(t)?Qr(t):t.contextElement?Qr(t.contextElement):[],popper:Qr(e)};var o,c,d=function(t){var e=hs(t);return hr.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),c=o.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:h,options:i});l.push(s||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,n=t.popper;if(ds(e,n)){a.rects={reference:cs(e,Mr(n),"fixed"===a.options.strategy),popper:Ar(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,l=void 0===o?{}:o,u=r.name;"function"==typeof s&&(a=s({state:a,options:l,name:u,instance:h})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){h.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){u(),c=!0}};if(!ds(t,e))return h;function u(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),h}}var ms=ps(),fs=ps({defaultModifiers:[Hr,as,$r,gr,os,ns,ls,Nr,ss]}),gs=ps({defaultModifiers:[Hr,as,$r,gr]});const vs="transitionend",bs=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},ys=t=>{const e=bs(t);return e&&document.querySelector(e)?e:null},ws=t=>{const e=bs(t);return e?document.querySelector(e):null},_s=t=>{t.dispatchEvent(new Event(vs))},Es=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Ss=t=>Es(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,As=t=>{if(!Es(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},Cs=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),Ts=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Ts(t.parentNode):null},ks=()=>{},Os=t=>{t.offsetHeight},xs=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ls=[],Ms=()=>"rtl"===document.documentElement.dir,Ps=t=>{var e;e=()=>{const e=xs();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Ls.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Ls)t()})),Ls.push(e)):e()},Rs=t=>{"function"==typeof t&&t()},Ds=(t,e,n=!0)=>{if(!n)return void Rs(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(vs,s),Rs(t))};e.addEventListener(vs,s),setTimeout((()=>{r||_s(e)}),i)},Is=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},Ns=/[^.]*(?=\..*)\.|.*/,Fs=/\..*/,js=/::\d+$/,Bs={};let $s=1;const qs={mouseenter:"mouseover",mouseleave:"mouseout"},Hs=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vs(t,e){return e&&`${e}::${$s++}`||t.uidEvent||$s++}function Ws(t){const e=Vs(t);return t.uidEvent=e,Bs[e]=Bs[e]||{},Bs[e]}function zs(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function Us(t,e,n){const i="string"==typeof e,r=i?n:e||n;let s=Ys(t);return Hs.has(s)||(s=t),[i,r,s]}function Ks(t,e,n,i,r){if("string"!=typeof e||!t)return;let[s,o,a]=Us(e,n,i);if(e in qs){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const l=Ws(t),c=l[a]||(l[a]={}),h=zs(c,o,s?n:null);if(h)return void(h.oneOff=h.oneOff&&r);const u=Vs(o,e.replace(Ns,"")),d=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return Js(r,{delegateTarget:o}),i.oneOff&&Qs.off(t,r.type,e,n),n.apply(o,[r])}}(t,n,o):function(t,e){return function n(i){return Js(i,{delegateTarget:t}),n.oneOff&&Qs.off(t,i.type,e),e.apply(t,[i])}}(t,o);d.delegationSelector=s?n:null,d.callable=o,d.oneOff=r,d.uidEvent=u,c[u]=d,t.addEventListener(a,d,s)}function Gs(t,e,n,i,r){const s=zs(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function Xs(t,e,n,i){const r=e[n]||{};for(const s of Object.keys(r))if(s.includes(i)){const i=r[s];Gs(t,e,n,i.callable,i.delegationSelector)}}function Ys(t){return t=t.replace(Fs,""),qs[t]||t}const Qs={on(t,e,n,i){Ks(t,e,n,i,!1)},one(t,e,n,i){Ks(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=Us(e,n,i),a=o!==e,l=Ws(t),c=l[o]||{},h=e.startsWith(".");if(void 0===s){if(h)for(const n of Object.keys(l))Xs(t,l,n,e.slice(1));for(const n of Object.keys(c)){const i=n.replace(js,"");if(!a||e.includes(i)){const e=c[n];Gs(t,l,o,e.callable,e.delegationSelector)}}}else{if(!Object.keys(c).length)return;Gs(t,l,o,s,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=xs();let r=null,s=!0,o=!0,a=!1;e!==Ys(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());let l=new Event(e,{bubbles:s,cancelable:!0});return l=Js(l,n),a&&l.preventDefault(),o&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Js(t,e){for(const[n,i]of Object.entries(e||{}))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>i})}return t}const Zs=new Map,to={set(t,e,n){Zs.has(t)||Zs.set(t,new Map);const i=Zs.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>Zs.has(t)&&Zs.get(t).get(e)||null,remove(t,e){if(!Zs.has(t))return;const n=Zs.get(t);n.delete(e),0===n.size&&Zs.delete(t)}};function eo(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function no(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const io={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${no(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${no(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=eo(t.dataset[i])}return e},getDataAttribute:(t,e)=>eo(t.getAttribute(`data-bs-${no(e)}`))};class ro{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Es(e)?io.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...Es(e)?io.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const i of Object.keys(e)){const r=e[i],s=t[i],o=Es(s)?"element":null==(n=s)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}var n}}class so extends ro{constructor(t,e){super(),(t=Ss(t))&&(this._element=t,this._config=this._getConfig(e),to.set(this._element,this.constructor.DATA_KEY,this))}dispose(){to.remove(this._element,this.constructor.DATA_KEY),Qs.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Ds(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return to.get(Ss(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const oo=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;Qs.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Cs(this))return;const r=ws(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},ao=".bs.alert",lo=`close${ao}`,co=`closed${ao}`;class ho extends so{static get NAME(){return"alert"}close(){if(Qs.trigger(this._element,lo).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Qs.trigger(this._element,co),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=ho.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}oo(ho,"close"),Ps(ho);const uo='[data-bs-toggle="button"]';class po extends so{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=po.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}Qs.on(document,"click.bs.button.data-api",uo,(t=>{t.preventDefault();const e=t.target.closest(uo);po.getOrCreateInstance(e).toggle()})),Ps(po);const mo={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!Cs(t)&&As(t)))}},fo=".bs.swipe",go=`touchstart${fo}`,vo=`touchmove${fo}`,bo=`touchend${fo}`,yo=`pointerdown${fo}`,wo=`pointerup${fo}`,_o={endCallback:null,leftCallback:null,rightCallback:null},Eo={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class So extends ro{constructor(t,e){super(),this._element=t,t&&So.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return _o}static get DefaultType(){return Eo}static get NAME(){return"swipe"}dispose(){Qs.off(this._element,fo)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Rs(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&Rs(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Qs.on(this._element,yo,(t=>this._start(t))),Qs.on(this._element,wo,(t=>this._end(t))),this._element.classList.add("pointer-event")):(Qs.on(this._element,go,(t=>this._start(t))),Qs.on(this._element,vo,(t=>this._move(t))),Qs.on(this._element,bo,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ao=".bs.carousel",Co=".data-api",To="next",ko="prev",Oo="left",xo="right",Lo=`slide${Ao}`,Mo=`slid${Ao}`,Po=`keydown${Ao}`,Ro=`mouseenter${Ao}`,Do=`mouseleave${Ao}`,Io=`dragstart${Ao}`,No=`load${Ao}${Co}`,Fo=`click${Ao}${Co}`,jo="carousel",Bo="active",$o=".active",qo=".carousel-item",Ho=$o+qo,Vo={ArrowLeft:xo,ArrowRight:Oo},Wo={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},zo={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Uo extends so{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=mo.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===jo&&this.cycle()}static get Default(){return Wo}static get DefaultType(){return zo}static get NAME(){return"carousel"}next(){this._slide(To)}nextWhenVisible(){!document.hidden&&As(this._element)&&this.next()}prev(){this._slide(ko)}pause(){this._isSliding&&_s(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Qs.one(this._element,Mo,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void Qs.one(this._element,Mo,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?To:ko;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&Qs.on(this._element,Po,(t=>this._keydown(t))),"hover"===this._config.pause&&(Qs.on(this._element,Ro,(()=>this.pause())),Qs.on(this._element,Do,(()=>this._maybeEnableCycle()))),this._config.touch&&So.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of mo.find(".carousel-item img",this._element))Qs.on(t,Io,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(Oo)),rightCallback:()=>this._slide(this._directionToOrder(xo)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new So(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Vo[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=mo.findOne($o,this._indicatorsElement);e.classList.remove(Bo),e.removeAttribute("aria-current");const n=mo.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Bo),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===To,r=e||Is(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>Qs.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(o(Lo).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),Os(r),n.classList.add(l),r.classList.add(l),this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(Bo),n.classList.remove(Bo,c,l),this._isSliding=!1,o(Mo)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return mo.findOne(Ho,this._element)}_getItems(){return mo.find(qo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Ms()?t===Oo?ko:To:t===Oo?To:ko}_orderToDirection(t){return Ms()?t===ko?Oo:xo:t===ko?xo:Oo}static jQueryInterface(t){return this.each((function(){const e=Uo.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}Qs.on(document,Fo,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=ws(this);if(!e||!e.classList.contains(jo))return;t.preventDefault();const n=Uo.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===io.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Qs.on(window,No,(()=>{const t=mo.find('[data-bs-ride="carousel"]');for(const e of t)Uo.getOrCreateInstance(e)})),Ps(Uo);const Ko=".bs.collapse",Go=`show${Ko}`,Xo=`shown${Ko}`,Yo=`hide${Ko}`,Qo=`hidden${Ko}`,Jo=`click${Ko}.data-api`,Zo="show",ta="collapse",ea="collapsing",na=`:scope .${ta} .${ta}`,ia='[data-bs-toggle="collapse"]',ra={parent:null,toggle:!0},sa={parent:"(null|element)",toggle:"boolean"};class oa extends so{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=mo.find(ia);for(const t of n){const e=ys(t),n=mo.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ra}static get DefaultType(){return sa}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>oa.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(Qs.trigger(this._element,Go).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(ta),this._element.classList.add(ea),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ea),this._element.classList.add(ta,Zo),this._element.style[e]="",Qs.trigger(this._element,Xo)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Qs.trigger(this._element,Yo).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Os(this._element),this._element.classList.add(ea),this._element.classList.remove(ta,Zo);for(const t of this._triggerArray){const e=ws(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ea),this._element.classList.add(ta),Qs.trigger(this._element,Qo)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Zo)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Ss(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ia);for(const e of t){const t=ws(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=mo.find(na,this._config.parent);return mo.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=oa.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}Qs.on(document,Jo,ia,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=ys(this),n=mo.find(e);for(const t of n)oa.getOrCreateInstance(t,{toggle:!1}).toggle()})),Ps(oa);const aa="dropdown",la=".bs.dropdown",ca=".data-api",ha="ArrowUp",ua="ArrowDown",da=`hide${la}`,pa=`hidden${la}`,ma=`show${la}`,fa=`shown${la}`,ga=`click${la}${ca}`,va=`keydown${la}${ca}`,ba=`keyup${la}${ca}`,ya="show",wa='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',_a=`${wa}.${ya}`,Ea=".dropdown-menu",Sa=Ms()?"top-end":"top-start",Aa=Ms()?"top-start":"top-end",Ca=Ms()?"bottom-end":"bottom-start",Ta=Ms()?"bottom-start":"bottom-end",ka=Ms()?"left-start":"right-start",Oa=Ms()?"right-start":"left-start",xa={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},La={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ma extends so{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=mo.next(this._element,Ea)[0]||mo.prev(this._element,Ea)[0]||mo.findOne(Ea,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return xa}static get DefaultType(){return La}static get NAME(){return aa}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Cs(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!Qs.trigger(this._element,ma,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))Qs.on(t,"mouseover",ks);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ya),this._element.classList.add(ya),Qs.trigger(this._element,fa,t)}}hide(){if(Cs(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!Qs.trigger(this._element,da,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Qs.off(t,"mouseover",ks);this._popper&&this._popper.destroy(),this._menu.classList.remove(ya),this._element.classList.remove(ya),this._element.setAttribute("aria-expanded","false"),io.removeDataAttribute(this._menu,"popper"),Qs.trigger(this._element,pa,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!Es(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${aa.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===t)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:Es(this._config.reference)?e=Ss(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=fs(e,this._menu,n)}_isShown(){return this._menu.classList.contains(ya)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return ka;if(t.classList.contains("dropstart"))return Oa;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Aa:Sa:e?Ta:Ca}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(io.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=mo.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>As(t)));n.length&&Is(n,e,t===ua,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Ma.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=mo.find(_a);for(const n of e){const e=Ma.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[ha,ua].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(wa)?this:mo.prev(this,wa)[0]||mo.next(this,wa)[0]||mo.findOne(wa,t.delegateTarget.parentNode),s=Ma.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}Qs.on(document,va,wa,Ma.dataApiKeydownHandler),Qs.on(document,va,Ea,Ma.dataApiKeydownHandler),Qs.on(document,ga,Ma.clearMenus),Qs.on(document,ba,Ma.clearMenus),Qs.on(document,ga,wa,(function(t){t.preventDefault(),Ma.getOrCreateInstance(this).toggle()})),Ps(Ma);const Pa=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ra=".sticky-top",Da="padding-right",Ia="margin-right";class Na{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Da,(e=>e+t)),this._setElementAttributes(Pa,Da,(e=>e+t)),this._setElementAttributes(Ra,Ia,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Da),this._resetElementAttributes(Pa,Da),this._resetElementAttributes(Ra,Ia)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&io.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=io.getDataAttribute(t,e);null!==n?(io.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(Es(t))e(t);else for(const n of mo.find(t,this._element))e(n)}}const Fa="backdrop",ja="show",Ba=`mousedown.bs.${Fa}`,$a={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qa={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ha extends ro{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return $a}static get DefaultType(){return qa}static get NAME(){return Fa}show(t){if(!this._config.isVisible)return void Rs(t);this._append();const e=this._getElement();this._config.isAnimated&&Os(e),e.classList.add(ja),this._emulateAnimation((()=>{Rs(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(ja),this._emulateAnimation((()=>{this.dispose(),Rs(t)}))):Rs(t)}dispose(){this._isAppended&&(Qs.off(this._element,Ba),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ss(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),Qs.on(t,Ba,(()=>{Rs(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Ds(t,this._getElement(),this._config.isAnimated)}}const Va=".bs.focustrap",Wa=`focusin${Va}`,za=`keydown.tab${Va}`,Ua="backward",Ka={autofocus:!0,trapElement:null},Ga={autofocus:"boolean",trapElement:"element"};class Xa extends ro{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ka}static get DefaultType(){return Ga}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Qs.off(document,Va),Qs.on(document,Wa,(t=>this._handleFocusin(t))),Qs.on(document,za,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Qs.off(document,Va))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=mo.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Ua?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Ua:"forward")}}const Ya=".bs.modal",Qa=`hide${Ya}`,Ja=`hidePrevented${Ya}`,Za=`hidden${Ya}`,tl=`show${Ya}`,el=`shown${Ya}`,nl=`resize${Ya}`,il=`click.dismiss${Ya}`,rl=`mousedown.dismiss${Ya}`,sl=`keydown.dismiss${Ya}`,ol=`click${Ya}.data-api`,al="modal-open",ll="show",cl="modal-static",hl={backdrop:!0,focus:!0,keyboard:!0},ul={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class dl extends so{constructor(t,e){super(t,e),this._dialog=mo.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Na,this._addEventListeners()}static get Default(){return hl}static get DefaultType(){return ul}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Qs.trigger(this._element,tl,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(al),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(Qs.trigger(this._element,Qa).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ll),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){for(const t of[window,this._dialog])Qs.off(t,Ya);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ha({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=mo.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),Os(this._element),this._element.classList.add(ll),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Qs.trigger(this._element,el,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){Qs.on(this._element,sl,(t=>{if("Escape"===t.key)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),Qs.on(window,nl,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Qs.on(this._element,rl,(t=>{Qs.one(this._element,il,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(al),this._resetAdjustments(),this._scrollBar.reset(),Qs.trigger(this._element,Za)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Qs.trigger(this._element,Ja).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(cl)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(cl),this._queueCallback((()=>{this._element.classList.remove(cl),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=Ms()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=Ms()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=dl.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}Qs.on(document,ol,'[data-bs-toggle="modal"]',(function(t){const e=ws(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),Qs.one(e,tl,(t=>{t.defaultPrevented||Qs.one(e,Za,(()=>{As(this)&&this.focus()}))}));const n=mo.findOne(".modal.show");n&&dl.getInstance(n).hide(),dl.getOrCreateInstance(e).toggle(this)})),oo(dl),Ps(dl);const pl=".bs.offcanvas",ml=".data-api",fl=`load${pl}${ml}`,gl="show",vl="showing",bl="hiding",yl=".offcanvas.show",wl=`show${pl}`,_l=`shown${pl}`,El=`hide${pl}`,Sl=`hidePrevented${pl}`,Al=`hidden${pl}`,Cl=`resize${pl}`,Tl=`click${pl}${ml}`,kl=`keydown.dismiss${pl}`,Ol={backdrop:!0,keyboard:!0,scroll:!1},xl={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ll extends so{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ol}static get DefaultType(){return xl}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||Qs.trigger(this._element,wl,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Na).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(vl),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(gl),this._element.classList.remove(vl),Qs.trigger(this._element,_l,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(Qs.trigger(this._element,El).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(bl),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(gl,bl),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Na).reset(),Qs.trigger(this._element,Al)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Ha({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():Qs.trigger(this._element,Sl)}:null})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_addEventListeners(){Qs.on(this._element,kl,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():Qs.trigger(this._element,Sl))}))}static jQueryInterface(t){return this.each((function(){const e=Ll.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Qs.on(document,Tl,'[data-bs-toggle="offcanvas"]',(function(t){const e=ws(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Cs(this))return;Qs.one(e,Al,(()=>{As(this)&&this.focus()}));const n=mo.findOne(yl);n&&n!==e&&Ll.getInstance(n).hide(),Ll.getOrCreateInstance(e).toggle(this)})),Qs.on(window,fl,(()=>{for(const t of mo.find(yl))Ll.getOrCreateInstance(t).show()})),Qs.on(window,Cl,(()=>{for(const t of mo.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Ll.getOrCreateInstance(t).hide()})),oo(Ll),Ps(Ll);const Ml=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Pl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Rl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Dl=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Ml.has(n)||Boolean(Pl.test(t.nodeValue)||Rl.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},Il={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Nl={allowList:Il,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Fl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},jl={entry:"(string|element|function|null)",selector:"(string|element)"};class Bl extends ro{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Nl}static get DefaultType(){return Fl}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},jl)}_setContent(t,e,n){const i=mo.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?Es(e)?this._putElementInTemplate(Ss(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)Dl(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return"function"==typeof t?t(this):t}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const $l=new Set(["sanitize","allowList","sanitizeFn"]),ql="fade",Hl="show",Vl=".modal",Wl="hide.bs.modal",zl="hover",Ul="focus",Kl={AUTO:"auto",TOP:"top",RIGHT:Ms()?"left":"right",BOTTOM:"bottom",LEFT:Ms()?"right":"left"},Gl={allowList:Il,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xl={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Yl extends so{constructor(e,n){if(void 0===t)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Gl}static get DefaultType(){return Xl}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Qs.off(this._element.closest(Vl),Wl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=Qs.trigger(this._element,this.constructor.eventName("show")),e=(Ts(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Qs.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(Hl),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Qs.on(t,"mouseover",ks);this._queueCallback((()=>{Qs.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Qs.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Hl),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))Qs.off(t,"mouseover",ks);this._activeTrigger.click=!1,this._activeTrigger[Ul]=!1,this._activeTrigger[zl]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Qs.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ql,Hl),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(ql),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Bl({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ql)}_isShown(){return this.tip&&this.tip.classList.contains(Hl)}_createPopper(t){const e="function"==typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=Kl[e.toUpperCase()];return fs(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)Qs.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===zl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===zl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Qs.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Ul:zl]=!0,e._enter()})),Qs.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Ul:zl]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Qs.on(this._element.closest(Vl),Wl,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=io.getDataAttributes(this._element);for(const t of Object.keys(e))$l.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Ss(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Yl.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Ps(Yl);const Ql={...Yl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Jl={...Yl.DefaultType,content:"(null|string|element|function)"};class Zl extends Yl{static get Default(){return Ql}static get DefaultType(){return Jl}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Zl.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Ps(Zl);const tc=".bs.scrollspy",ec=`activate${tc}`,nc=`click${tc}`,ic=`load${tc}.data-api`,rc="active",sc="[href]",oc=".nav-link",ac=`${oc}, .nav-item > ${oc}, .list-group-item`,lc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},cc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class hc extends so{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return lc}static get DefaultType(){return cc}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ss(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Qs.off(this._config.target,nc),Qs.on(this._config.target,nc,sc,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else r||t||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=mo.find(sc,this._config.target);for(const e of t){if(!e.hash||Cs(e))continue;const t=mo.findOne(e.hash,this._element);As(t)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(rc),this._activateParents(t),Qs.trigger(this._element,ec,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))mo.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(rc);else for(const e of mo.parents(t,".nav, .list-group"))for(const t of mo.prev(e,ac))t.classList.add(rc)}_clearActiveClass(t){t.classList.remove(rc);const e=mo.find(`${sc}.${rc}`,t);for(const t of e)t.classList.remove(rc)}static jQueryInterface(t){return this.each((function(){const e=hc.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Qs.on(window,ic,(()=>{for(const t of mo.find('[data-bs-spy="scroll"]'))hc.getOrCreateInstance(t)})),Ps(hc);const uc=".bs.tab",dc=`hide${uc}`,pc=`hidden${uc}`,mc=`show${uc}`,fc=`shown${uc}`,gc=`click${uc}`,vc=`keydown${uc}`,bc=`load${uc}`,yc="ArrowLeft",wc="ArrowRight",_c="ArrowUp",Ec="ArrowDown",Sc="active",Ac="fade",Cc="show",Tc=":not(.dropdown-toggle)",kc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oc=`.nav-link${Tc}, .list-group-item${Tc}, [role="tab"]${Tc}, ${kc}`,xc=`.${Sc}[data-bs-toggle="tab"], .${Sc}[data-bs-toggle="pill"], .${Sc}[data-bs-toggle="list"]`;class Lc extends so{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Qs.on(this._element,vc,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?Qs.trigger(e,dc,{relatedTarget:t}):null;Qs.trigger(t,mc,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(Sc),this._activate(ws(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),Qs.trigger(t,fc,{relatedTarget:e})):t.classList.add(Cc)}),t,t.classList.contains(Ac)))}_deactivate(t,e){t&&(t.classList.remove(Sc),t.blur(),this._deactivate(ws(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),Qs.trigger(t,pc,{relatedTarget:e})):t.classList.remove(Cc)}),t,t.classList.contains(Ac)))}_keydown(t){if(![yc,wc,_c,Ec].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[wc,Ec].includes(t.key),n=Is(this._getChildren().filter((t=>!Cs(t))),t.target,e,!0);n&&(n.focus({preventScroll:!0}),Lc.getOrCreateInstance(n).show())}_getChildren(){return mo.find(Oc,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=ws(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=mo.findOne(t,n);r&&r.classList.toggle(i,e)};i(".dropdown-toggle",Sc),i(".dropdown-menu",Cc),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Sc)}_getInnerElement(t){return t.matches(Oc)?t:mo.findOne(Oc,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=Lc.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Qs.on(document,gc,kc,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),Cs(this)||Lc.getOrCreateInstance(this).show()})),Qs.on(window,bc,(()=>{for(const t of mo.find(xc))Lc.getOrCreateInstance(t)})),Ps(Lc);const Mc=".bs.toast",Pc=`mouseover${Mc}`,Rc=`mouseout${Mc}`,Dc=`focusin${Mc}`,Ic=`focusout${Mc}`,Nc=`hide${Mc}`,Fc=`hidden${Mc}`,jc=`show${Mc}`,Bc=`shown${Mc}`,$c="hide",qc="show",Hc="showing",Vc={animation:"boolean",autohide:"boolean",delay:"number"},Wc={animation:!0,autohide:!0,delay:5e3};class zc extends so{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Wc}static get DefaultType(){return Vc}static get NAME(){return"toast"}show(){Qs.trigger(this._element,jc).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove($c),Os(this._element),this._element.classList.add(qc,Hc),this._queueCallback((()=>{this._element.classList.remove(Hc),Qs.trigger(this._element,Bc),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(Qs.trigger(this._element,Nc).defaultPrevented||(this._element.classList.add(Hc),this._queueCallback((()=>{this._element.classList.add($c),this._element.classList.remove(Hc,qc),Qs.trigger(this._element,Fc)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qc),super.dispose()}isShown(){return this._element.classList.contains(qc)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Qs.on(this._element,Pc,(t=>this._onInteraction(t,!0))),Qs.on(this._element,Rc,(t=>this._onInteraction(t,!1))),Qs.on(this._element,Dc,(t=>this._onInteraction(t,!0))),Qs.on(this._element,Ic,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=zc.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}oo(zc),Ps(zc)})()})();
//# sourceMappingURL=application.js.map